= どの手順 を使用すればよいですか。
:allow-uri-read: 




== どの手順 を使用すればよいですか。

可能なかぎり、Grid Managerの*[ボリュームのリストア]*ページを使用してオブジェクトデータをリストアします。

* ボリュームが*メンテナンス* > *ボリュームの復元* > *復元するノード*にリストされている場合は、link:../maintain/restoring-volume.html["Grid Managerのボリュームリストアページ"] 。
* *メンテナンス* > *ボリュームの復元* > *復元するノード*にボリュームが表示されない場合は、以下の手順に従ってください。 `repair-data`オブジェクト データを復元するスクリプト。
+
リカバリされたストレージノードのボリューム数が交換対象のノードよりも少ない場合は、スクリプトを使用する必要があり `repair-data`ます。




NOTE: repair-dataスクリプトは廃止され、今後のリリースで削除される予定です。可能な場合は、を使用しlink:../maintain/restoring-volume.html["GridManagerテノホリユウムノリストア手順"]ます。



== スクリプトを使用し `repair-data`てオブジェクトデータをリストアする

.開始する前に
* 回復したストレージノードの接続状態が「接続済み」であることを確認しましたimage:../media/icon_alert_green_checkmark.png["緑色のチェックマークのアイコン"]グリッド マネージャーの *ノード* > *概要* タブで。


.タスクの内容
グリッドのILMルールがオブジェクトコピーを作成するように設定されている場合は、他のストレージノードまたはクラウドストレージプールからオブジェクトデータをリストアできます。

次の点に注意してください。

* レプリケートされたコピーを 1 つだけ保存するように ILM ルールが設定されていて、そのコピーがストレージボリュームに障害が発生した場合、オブジェクトをリカバリすることはできません。
* オブジェクトのコピーがクラウドストレージプールにしか残っていない場合、 StorageGRID は、オブジェクトデータをリストアするために複数の要求をクラウドストレージプールエンドポイントに問題 する必要があります。この手順 を実行する前に、テクニカルサポートに問い合わせて、リカバリ期間と関連コストの見積もりを依頼してください。




== スクリプトについて `repair-data`

オブジェクトデータをリストアするには、スクリプトを実行し `repair-data`ます。このスクリプトは、オブジェクトデータのリストアプロセスを開始し、 ILM スキャンと連動して ILM ルールを適用します。

以下の* Replicated data *または* Erasure-Coded（EC）data *を選択すると、レプリケートデータとイレイジャーコーディングデータのどちらをリストアするかに基づいて、スクリプトの各種オプションを確認でき `repair-data`ます。両方のタイプのデータをリストアする必要がある場合は、両方のコマンドセットを実行する必要があります。


NOTE: スクリプトの詳細を表示するには `repair-data`、プライマリ管理ノードのコマンドラインからと入力します `repair-data --help`。


NOTE: repair-dataスクリプトは廃止され、今後のリリースで削除される予定です。可能な場合は、を使用しlink:../maintain/restoring-volume.html["GridManagerテノホリユウムノリストア手順"]ます。

[role="tabbed-block"]
====
.レプリケートデータ
--
レプリケートデータをリストアするコマンドは、ノード全体を修復するのか、ノード上の一部のボリュームのみを修復するのかに応じて 2 つあります。

`repair-data start-replicated-node-repair`

`repair-data start-replicated-volume-repair`

レプリケートデータの修復は、次のコマンドで追跡できます。

`repair-data show-replicated-repair-status`

--
.イレイジャーコーディング（EC）データ
--
イレイジャーコーディングデータをリストアするコマンドは、ノード全体を修復するのか、ノード上の一部のボリュームのみを修復するのかに応じて 2 つあります。

`repair-data start-ec-node-repair`

`repair-data start-ec-volume-repair`

イレイジャーコーディングデータの修復は、次のコマンドで追跡できます。

`repair-data show-ec-repair-status`


NOTE: イレイジャーコーディングデータの修復は、一部のストレージノードがオフライン状態で開始できます。ただし、すべてのイレイジャーコーディングデータを把握できない場合は、修復を完了できません。修復はすべてのノードが使用可能になったあとに完了します。


NOTE: EC 修復ジョブによって、大量のストレージが一時的にリザーブされます。ストレージアラートがトリガーされることもありますが、修復が完了すると解決します。予約に必要なストレージが不足していると、 EC の修復ジョブが失敗します。ストレージリザベーションは、ジョブが失敗したか成功したかに関係なく、 EC 修復ジョブが完了すると解放されます。

--
====