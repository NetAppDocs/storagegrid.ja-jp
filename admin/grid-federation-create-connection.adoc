---
permalink: admin/grid-federation-create-connection.html 
sidebar: sidebar 
keywords: grid federation, create connection, configure connection 
summary: テナントの詳細をクローニングしてオブジェクトデータをレプリケートする場合は、2つのStorageGRID システム間にグリッドフェデレーション接続を作成できます。 
---
= グリッドフェデレーション接続を作成する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
テナントの詳細をクローニングしてオブジェクトデータをレプリケートする場合は、2つのStorageGRID システム間にグリッドフェデレーション接続を作成できます。

図に示すように、グリッド連携接続の作成には、両方のグリッドでの手順が含まれます。一方のグリッドに接続を追加し、もう一方のグリッドで接続を完了します。どちらのグリッドからでも開始できます。

image::../media/grid-federation-create-connection.png[2つのグリッド上に接続を作成する手順の概要図]

.開始する前に
* グリッドフェデレーション接続を設定するためのを確認しておきますlink:grid-federation-overview.html["考慮事項と要件"]。
* 各グリッドにIPアドレスまたはVIPアドレスの代わりに完全修飾ドメイン名（FQDN）を使用する場合は、使用する名前を確認し、各グリッドのDNSサーバに適切なエントリがあることを確認しておきます。
* を使用しているlink:../admin/web-browser-requirements.html["サポートされている Web ブラウザ"]。
* 両方のグリッドのRootアクセス権限とプロビジョニングパスフレーズが必要です。




== 接続を追加します

次の手順は、2つのStorageGRID システムのどちらかで実行します。

.手順
. いずれかのグリッドのプライマリ管理ノードからGrid Managerにサインインします。
. *構成* > *システム* > *グリッド フェデレーション* を選択します。
. [接続の追加]*を選択します。
. 接続の詳細を入力します。
+
[cols="1a,2a"]
|===
| フィールド | 製品説明 


 a| 
接続名
 a| 
この接続を識別するための一意の名前（「Grid 1 - Grid 2」など）。



 a| 
このグリッドのFQDNまたはIP
 a| 
次のいずれか

** 現在サインインしているグリッドのFQDN
** このグリッド上のHAグループのVIPアドレスです
** このグリッド上の管理ノードまたはゲートウェイノードのIPアドレス。IPは、デスティネーショングリッドが到達可能な任意のネットワーク上に設定できます。




 a| 
ポート
 a| 
この接続に使用するポート。23000～23999の任意の未使用ポート番号を入力できます。

この接続の両方のグリッドが同じポートを使用します。どちらのグリッドでも、このポートを他の接続に使用しているノードがないことを確認する必要があります。



 a| 
このグリッドの証明書有効日数
 a| 
接続内のこのグリッドのセキュリティ証明書を有効にする日数。デフォルト値は730日（2年）ですが、1～762日の任意の値を入力できます。

接続を保存すると、StorageGRID で各グリッドのクライアント証明書とサーバ証明書が自動的に生成されます。



 a| 
このグリッドのプロビジョニングパスフレーズ
 a| 
サインインしているグリッドのプロビジョニングパスフレーズ。



 a| 
もう一方のグリッドのFQDNまたはIP
 a| 
次のいずれか

** 接続先のグリッドのFQDN
** もう一方のグリッド上のHAグループのVIPアドレスです
** もう一方のグリッド上の管理ノードまたはゲートウェイノードのIPアドレス。IPは、ソースグリッドが到達可能な任意のネットワーク上に設定できます。


|===
. [保存して続行]*を選択します。
. [検証ファイルのダウンロード]ステップで、*[検証ファイルのダウンロード]*を選択します。
+
もう一方のグリッドで接続が完了すると、どちらのグリッドからも検証ファイルをダウンロードできなくなります。

. ダウンロードしたファイル(`_connection-name_.grid-federation`を見つけ、安全な場所に保存します。
+

CAUTION: このファイルには秘密情報（別名でマスク）やその他の機密情報が含まれて `***`おり、安全に保存および送信する必要があります。

. [Close]*を選択して、[Grid Federation]ページに戻ります。
. 新しい接続が表示され、*接続ステータス*が*接続待ち*になっていることを確認します。
. もう一方のグリッドのファイルをグリッド管理者に提供し `_connection-name_.grid-federation`ます。




== 接続を完了します

接続先のStorageGRID システム（もう一方のグリッド）で次の手順を実行します。

.手順
. プライマリ管理ノードからGrid Managerにサインインします。
. *構成* > *システム* > *グリッド フェデレーション* を選択します。
. [Upload verification file]*を選択して、[Upload]ページにアクセスします。
. [検証ファイルのアップロード]*を選択します。次に、最初のグリッドからダウンロードしたファイルを参照して選択し(`_connection-name_.grid-federation`ます）。
+
接続の詳細が表示されます。

. 必要に応じて、このグリッドのセキュリティ証明書に別の有効な日数を入力します。[Certificate Valid Days]*エントリは、最初のグリッドに入力した値にデフォルトで設定されますが、各グリッドでは異なる有効期限を使用できます。
+
一般に、接続の両側の証明書には同じ日数を使用します。

+

CAUTION: 接続のいずれかの側の証明書が期限切れになると、接続は動作を停止し、証明書が更新されるまでレプリケーションは保留になります。

. 現在サインインしているグリッドのプロビジョニングパスフレーズを入力します。
. [保存してテスト]*を選択します。
+
証明書が生成され、接続がテストされます。接続が有効な場合は、成功を示すメッセージが表示され、[Grid Federation]ページに新しい接続がリストされます。[接続ステータス]*は*[接続済み]*になります。

+
エラーメッセージが表示された場合は、問題に対処します。を参照して link:grid-federation-troubleshoot.html["グリッドフェデレーションエラーをトラブルシューティングする"]

. 最初のグリッドのグリッドフェデレーションページに移動し、ブラウザを更新します。[接続ステータス]*が[接続済み]*になっていることを確認します。
. 接続が確立されたら、検証ファイルのすべてのコピーを安全に削除します。
+
この接続を編集すると、新しい検証ファイルが作成されます。元のファイルは再利用できません。



.終了後
* の考慮事項を確認しますlink:grid-federation-manage-tenants.html["許可されたテナントの管理"]。
* link:creating-tenant-account.html["新しいテナントアカウントを1つ以上作成します"]をクリックし、*[Use grid federation connection]*権限を割り当てて、新しい接続を選択します。
* link:grid-federation-manage-connection.html["接続を管理します"]必要に応じて。接続値の編集、接続のテスト、接続証明書のローテーション、接続の削除を行うことができます。
* link:../monitor/grid-federation-monitor-connections.html["接続を監視します"]通常のStorageGRID監視アクティビティの一部として使用します。
* link:grid-federation-troubleshoot.html["接続のトラブルシューティングを行います"]アカウントクローンやグリッド間レプリケーションに関連するアラートやエラーの解決などが含まれます。

