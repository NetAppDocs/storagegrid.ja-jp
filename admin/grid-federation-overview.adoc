---
permalink: admin/grid-federation-overview.html 
sidebar: sidebar 
keywords: grid federation, cross-grid replication, account clone, cgr, disaster recovery 
summary: グリッドフェデレーションを使用すると、ディザスタリカバリ用にテナントをクローニングし、2つのStorageGRID システム間でオブジェクトをレプリケートできます。 
---
= グリッドフェデレーションとは
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
グリッドフェデレーションを使用すると、ディザスタリカバリ用にテナントをクローニングし、2つのStorageGRID システム間でオブジェクトをレプリケートできます。



== グリッドフェデレーション接続とは何ですか？

グリッドフェデレーション接続は、2つのStorageGRID システムの管理ノードとゲートウェイノードの間の双方向の信頼されたセキュアな接続です。



== グリッドフェデレーションのワークフロー

次のワークフロー図は、2つのグリッド間のグリッドフェデレーション接続を設定する手順をまとめたものです。

image::../media/grid-federation-workflow.png[グリッドフェデレーション接続ワークフロー]



== グリッドフェデレーション接続に関する考慮事項と要件

* グリッドフェデレーションに使用されるグリッドでは、同じバージョンのが実行されているか、メジャーバージョンの違いが1つ以上ないStorageGRIDが実行されている必要があります。
+
バージョン要件の詳細については、を参照してlink:../release-notes/index.html["リリースノート"]ください。

* グリッドは、他のグリッドへの1つ以上のグリッドフェデレーション接続を持つことができます。各グリッドフェデレーション接続は、他の接続とは独立しています。たとえば、Grid 1がGrid 2と1つの接続を持ち、Grid 3と2つ目の接続を持つ場合、Grid 2とGrid 3の間に暗黙的な接続はありません。
* グリッドフェデレーション接続は双方向です。接続が確立されたら、どちらのグリッドからも接続を監視および管理できます。
* またはを使用するには、グリッドフェデレーション接続が少なくとも1つ存在している必要がありますlink:grid-federation-what-is-account-clone.html["アカウントのクローン"]link:grid-federation-what-is-cross-grid-replication.html["グリッド間レプリケーション"]。




=== ネットワークとIPアドレスの要件

* グリッドフェデレーション接続は、グリッドネットワーク、管理ネットワーク、またはクライアントネットワークで確立できます。
* グリッドフェデレーション接続は、あるグリッドを別のグリッドに接続します。各グリッドの設定では、管理ノード、ゲートウェイノード、またはその両方で構成されるもう一方のグリッド上のグリッドフェデレーションエンドポイントを指定します。
* ベストプラクティスとして、ゲートウェイノードと管理ノードを各グリッドで接続することを推奨link:managing-high-availability-groups.html["ハイアベイラビリティ（HA）グループ"]します。HAグループを使用すると、ノードを使用できなくなってもグリッドフェデレーション接続をオンラインのまま維持できます。いずれかのHAグループのアクティブインターフェイスで障害が発生した場合は、バックアップインターフェイスを使用して接続を確立できます。
* 単一の管理ノードまたはゲートウェイノードのIPアドレスを使用するグリッドフェデレーション接続を作成することは推奨されません。ノードが使用できなくなると、グリッドフェデレーション接続も使用できなくなります。
* link:grid-federation-what-is-cross-grid-replication.html["グリッド間レプリケーション"]オブジェクトの数を増やすには、各グリッドのストレージノードが、もう一方のグリッドに設定されている管理ノードとゲートウェイノードにアクセスできる必要があります。グリッドごとに、すべてのストレージノードが、接続に使用する管理ノードまたはゲートウェイノードとしてへの広帯域幅ルートを持っていることを確認します。




=== FQDNを使用して接続の負荷を分散します

本番環境では、Fully Qualified Domain Name（FQDN；完全修飾ドメイン名）を使用して接続内の各グリッドを識別します。次に、次のように適切なDNSエントリを作成します。

* Grid 1のFQDNを、Grid 1のHAグループの1つ以上の仮想IP（VIP）アドレス、またはGrid 1の1つ以上の管理ノードまたはゲートウェイノードのIPアドレスにマッピングします。
* Grid 2のFQDNを、Grid 2の1つ以上のVIPアドレス、またはGrid 2内の1つ以上の管理ノードまたはゲートウェイノードのIPアドレスにマッピングします。


複数のDNSエントリを使用する場合、接続を使用する要求は次のようにロードバランシングされます。

* 複数のHAグループのVIPアドレスにマッピングされたDNSエントリは、HAグループ内のアクティブノード間で負荷分散されます。
* 複数の管理ノードまたはゲートウェイノードのIPアドレスにマッピングされたDNSエントリは、マッピングしたノード間で負荷分散されます。




=== ポートの要件

グリッドフェデレーション接続を作成するときは、未使用のポート番号（23000~23999）を指定できます。この接続の両方のグリッドが同じポートを使用します。

どちらのグリッドでも、このポートを他の接続に使用しているノードがないことを確認する必要があります。



=== 証明書の要件

グリッドフェデレーション接続を設定すると、StorageGRID によって次の4つのSSL証明書が自動的に生成されます。

* グリッド1からグリッド2に送信される情報を認証および暗号化するためのサーバ証明書とクライアント証明書
* グリッド2からグリッド1に送信される情報を認証および暗号化するためのサーバ証明書とクライアント証明書


image::../media/grid-federation-certificates.png[グリッドフェデレーション証明書]

デフォルトでは、証明書の有効期間は730日間（2年間）です。これらの証明書の有効期限が近づくと、* Expiration of grid federation certificate *アラートによって証明書のローテーションを要求されます。これはGrid Managerを使用して実行できます。


CAUTION: 接続のいずれかの側の証明書が期限切れになると、接続は動作を停止します。証明書が更新されるまで、データレプリケーションは保留されます。

.詳細
* link:grid-federation-create-connection.html["グリッドフェデレーション接続を作成する"]
* link:grid-federation-manage-connection.html["グリッドフェデレーション接続を管理します"]
* link:grid-federation-troubleshoot.html["グリッドフェデレーションエラーをトラブルシューティングする"]

