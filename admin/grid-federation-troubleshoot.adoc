---
permalink: admin/grid-federation-troubleshoot.html 
sidebar: sidebar 
keywords: troubleshoot, grid federation connection, account clone, cross-grid replication, alerts, errors 
summary: グリッドフェデレーション接続、アカウントクローン、およびグリッド間レプリケーションに関連するアラートやエラーのトラブルシューティングが必要になる場合があります。 
---
= グリッドフェデレーションエラーをトラブルシューティングする
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
グリッドフェデレーション接続、アカウントクローン、およびグリッド間レプリケーションに関連するアラートやエラーのトラブルシューティングが必要になる場合があります。



== [[grid-federation-errors]]グリッドフェデレーション接続のアラートとエラー

グリッドフェデレーション接続でアラートを受信したり、エラーが発生したりすることがあります。

接続問題 を解決するための変更を行った後、接続をテストして、接続ステータスが*接続済み*に戻ることを確認します。手順については、を参照してくださいlink:grid-federation-manage-connection.html["グリッドフェデレーション接続を管理します"]。



=== Grid Federation Connection Failureアラート

.問題
Grid federation connection failure *アラートがトリガーされました。

.詳細
グリッド間のグリッド連携接続が機能していない可能性があります。

.推奨される対処方法
. 両方のグリッドの[Grid Federation]ページで設定を確認します。すべての値が正しいことを確認します。を参照して link:grid-federation-manage-connection.html["グリッドフェデレーション接続を管理します"]
. 接続に使用した証明書を確認します。有効期限が切れたグリッドフェデレーション証明書に関するアラートがないこと、および各証明書の詳細が有効であることを確認してください。の接続証明書のローテーション手順を参照してくださいlink:grid-federation-manage-connection.html["グリッドフェデレーション接続を管理します"]。
. 両方のグリッドのすべての管理ノードとゲートウェイノードがオンラインで使用可能であることを確認します。これらのノードに影響している可能性があるアラートを解決してから再試行してください。
. ローカルまたはリモートのグリッドの完全修飾ドメイン名（FQDN）を指定した場合は、DNSサーバがオンラインで使用可能であることを確認します。ネットワーク、IPアドレス、およびDNSの要件については、を参照してくださいlink:grid-federation-overview.html["グリッドフェデレーションとは"]。




=== Gridフェデレーション証明書の有効期限に関するアラート

.問題
Expiration of grid federation certificate *アラートがトリガーされました。

.詳細
このアラートは、1つ以上のグリッドフェデレーション証明書の有効期限が近づいていることを示しています。

.推奨される対処方法
の接続証明書のローテーション手順を参照してくださいlink:grid-federation-manage-connection.html["グリッドフェデレーション接続を管理します"]。



=== グリッドフェデレーション接続の編集中にエラーが発生しました

.問題
グリッドフェデレーション接続を編集するときに、*[保存してテスト]*を選択すると、「1つ以上のノードで候補構成ファイルを作成できませんでした」という警告メッセージが表示されます。

.詳細
グリッドフェデレーション接続を編集すると、StorageGRID は最初のグリッドのすべての管理ノードに「候補構成」ファイルを保存しようとします。管理ノードがオフラインの場合など、このファイルをすべての管理ノードに保存できない場合は、警告メッセージが表示されます。

.推奨される対処方法
. 接続の編集に使用するグリッドで、* nodes *を選択します。
. そのグリッドのすべての管理ノードがオンラインであることを確認します。
. オフラインになっているノードがある場合は、それらのノードをオンラインに戻し、接続の編集をやり直します。




== アカウントのクローンエラー



=== クローンされたテナントアカウントにサインインできない

.問題
クローンされたテナントアカウントにはサインインできません。Tenant Managerのサインインページに「Your credentials for this account were invalid」というエラーメッセージが表示されます。もう一度実行してください。"

.詳細
セキュリティ上の理由から、テナントアカウントをテナントのソースグリッドからテナントのデスティネーショングリッドにクローニングする場合、テナントのローカルrootユーザに設定したパスワードはクローニングされません。同様に、テナントのソースグリッドでローカルユーザを作成しても、ローカルユーザのパスワードはデスティネーショングリッドにクローニングされません。

.推奨される対処方法
rootユーザがテナントのデスティネーショングリッドにサインインする前に、グリッド管理者がデスティネーショングリッドで最初にサインインする必要がありますlink:changing-password-for-tenant-local-root-user.html["ローカルrootユーザのパスワードを変更します"]。

クローニングされたローカルユーザがテナントのデスティネーショングリッドにサインインする前に、クローニングされたテナントのrootユーザがデスティネーショングリッドにユーザのパスワードを追加する必要があります。手順については、Tenant Managerの使用手順のを参照してくださいlink:../tenant/managing-local-users.html["ローカルユーザを管理します"]。



=== クローンなしでテナントが作成された

.問題
Use grid federation connection *権限で新しいテナントを作成すると、「Tenant created without a clone」というメッセージが表示されます。

.詳細
この問題 は、接続ステータスの更新が遅延した場合に発生する可能性があります原因 。これにより、正常でない接続が*接続済み*として表示される可能性があります。

.推奨される対処方法
. エラーメッセージに表示された理由を確認し、接続を妨げる可能性のあるネットワークまたはその他の問題を解決します。を参照して <<grid-federation-errors,グリッドフェデレーション接続のアラートとエラー>>
. 手順に従ってでグリッドフェデレーション接続をテストしlink:grid-federation-manage-connection.html["グリッドフェデレーション接続を管理します"]、問題が解決されたことを確認します。
. テナントのソースグリッドで、*[Tenants]*を選択します。
. クローニングに失敗したテナントアカウントを特定します。
. テナント名を選択して詳細ページを表示します。
. [アカウントのクローンを再試行する]*を選択します。
+
image::../media/grid-federation-retry-account-clone.png[エラーメッセージと[Retry account clone]ボタンを示すスクリーンショット]

+
エラーが解決されると、テナントアカウントがもう一方のグリッドにクローニングされます。





== グリッド間レプリケーションのアラートとエラー



=== 接続またはテナントについて表示された最後のエラー

.問題
接続の場合link:../monitor/grid-federation-monitor-connections.html["グリッドフェデレーション接続の表示"]（または接続の場合link:grid-federation-manage-tenants.html["許可されたテナントの管理"]）、接続の詳細ページの* Last error *列にエラーが表示されます。例：

image::../media/grid-federation-last-error.png[グリッドフェデレーション接続の[Last error]列に表示されるメッセージを示すスクリーンショット]

.詳細
各グリッドフェデレーション接続の* Last error *列には、テナントのデータが他のグリッドにレプリケートされているときに発生した最新のエラー（存在する場合）が表示されます。この列には、最後に発生したグリッド間レプリケーションエラーのみが表示されます。以前に発生した可能性のあるエラーは表示されません。この列のエラーは、次のいずれかの理由で発生する可能性があります。

* ソースオブジェクトのバージョンが見つかりませんでした。
* ソースバケットが見つかりませんでした。
* デスティネーションバケットが削除されました。
* デスティネーションバケットが別のアカウントで再作成されました。
* デスティネーションバケットのバージョン管理が中断されています。
* デスティネーションバケットが同じアカウントで再作成されましたが、現在バージョン管理されていません。


.推奨される対処方法
「* Last error *」列にエラーメッセージが表示された場合は、次の手順を実行します。

. メッセージテキストを確認します。
. 推奨される対処方法を実行します。たとえば、グリッド間レプリケーションのためにデスティネーションバケットでバージョン管理が一時停止されていた場合は、そのバケットのバージョン管理を再度有効にします。
. テーブルから接続またはテナントアカウントを選択します。
. [Clear error]*を選択します。
. メッセージをクリアしてシステムのステータスを更新するには、*はい*を選択します。
. 5~6分待ってから、新しいオブジェクトをバケットに取り込みます。エラーメッセージが再表示されないことを確認します。
+

NOTE: エラーメッセージがクリアされるように、メッセージのタイムスタンプから5分以上経過してから新しいオブジェクトを取り込んでください。

+

TIP: エラーをクリアしたあとに、同じくエラーが発生している別のバケットにオブジェクトを取り込んだ場合は、新しい* Last error *が表示されることがあります。

. バケットエラーが原因でレプリケートに失敗したオブジェクトがないかどうかを確認するには、を参照してくださいlink:../admin/grid-federation-retry-failed-replication.html["失敗したレプリケーション処理を特定して再試行します"]。




=== Cross-grid replication permanent failureアラート

.問題
Cross-grid replication permanent failure *アラートがトリガーされました。

.詳細
このアラートは、ユーザによる解決が必要な理由で、2つのグリッド上のバケット間でテナントオブジェクトをレプリケートできない場合に表示されます。このアラートの主な原因は、ソースまたはデスティネーションのバケットが変更されたことです。

.推奨される対処方法
. アラートがトリガーされたグリッドにサインインします。
. [設定]*>*[システム]*>*[グリッドフェデレーション]*に移動し、アラートに表示されている接続名を確認します。
. [Permitted Tenants]タブで、* Last error *列を確認し、エラーが発生しているテナントアカウントを特定します。
. 障害の詳細については、の手順を参照link:../monitor/grid-federation-monitor-connections.html["グリッドフェデレーション接続を監視する"]して、グリッド間レプリケーションの指標を確認してください。
. 影響を受ける各テナントアカウント：
+
.. テナントがグリッド間レプリケーションのデスティネーショングリッドでのクォータを超えていないことを確認するには、の手順を参照してくださいlink:../monitor/monitoring-tenant-activity.html["テナントのアクティビティを監視する"]。
.. 必要に応じて、デスティネーショングリッドでのテナントのクォータを増やして、新しいオブジェクトを保存できるようにします。


. 影響を受ける各テナントについて、両方のグリッドでTenant Managerにサインインしてバケットのリストを比較できるようにします。
. クロスグリッドレプリケーションが有効になっている各バケットについて、次の点を確認します。
+
** もう一方のグリッドには、同じテナントに対応するバケットがあります（正確な名前を使用する必要があります）。
** どちらのバケットでもオブジェクトのバージョン管理が有効になっています（どちらのグリッドでもバージョン管理を一時停止することはできません）。
** 両方のバケットでS3オブジェクトロックが無効になっています。
** どちらのバケットも「* Deleting objects：read-only *」状態ではありません。


. 問題が解決されたことを確認するには、の手順を参照しlink:../monitor/grid-federation-monitor-connections.html["グリッドフェデレーション接続を監視する"]てクロスグリッドレプリケーションの指標を確認するか、次の手順を実行します。
+
.. [Grid Federation]ページに戻ります。
.. 影響を受けるテナントを選択し、* Last error *列で* Clear Error *を選択します。
.. メッセージをクリアしてシステムのステータスを更新するには、*はい*を選択します。
.. 5~6分待ってから、新しいオブジェクトをバケットに取り込みます。エラーメッセージが再表示されないことを確認します。
+

NOTE: エラーメッセージがクリアされるように、メッセージのタイムスタンプから5分以上経過してから新しいオブジェクトを取り込んでください。

+

NOTE: 解決後にアラートがクリアされるまでに最大1日かかることがあります。

.. に進み、link:grid-federation-retry-failed-replication.html["失敗したレプリケーション処理を特定して再試行します"]他のグリッドにレプリケートできなかったオブジェクトを特定するかマーカーを削除し、必要に応じてレプリケーションを再試行します。






=== Cross-grid replication resource unavailableアラート

.問題
Cross-grid replication resource unavailable *アラートがトリガーされました。

.詳細
このアラートは、リソースを使用できないためにグリッド間のレプリケーション要求が保留中であることを示しています。たとえば、ネットワークエラーが発生している可能性があります。

.推奨される対処方法
. アラートを監視して、問題 が自動的に解決するかどうかを確認します。
. 問題 が解消されない場合は、いずれかのグリッドに同じ接続に対する* Grid federation connection failure *アラートが表示されているか、またはノードに対して* Unable to communicate with node *アラートが表示されているかを確認します。このアラートは、アラートを解決すると解決される場合があります。
. 障害の詳細については、の手順を参照link:../monitor/grid-federation-monitor-connections.html["グリッドフェデレーション接続を監視する"]して、グリッド間レプリケーションの指標を確認してください。
. アラートを解決できない場合は、テクニカルサポートにお問い合わせください。


問題 の解決後、グリッド間レプリケーションは通常どおり続行されます。
