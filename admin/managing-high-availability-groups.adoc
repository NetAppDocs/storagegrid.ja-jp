---
permalink: admin/managing-high-availability-groups.html 
sidebar: sidebar 
keywords: manage high availability group, ha groups, admin node, gateway node, active interface, backup interface, priority order 
summary: ハイアベイラビリティ（HA）グループは、S3クライアントに可用性の高いデータ接続、およびGrid ManagerとTenant Managerへの可用性の高い接続を提供します。 
---
= ハイアベイラビリティ（HA）グループとは何ですか。
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ハイアベイラビリティ（HA）グループは、S3クライアントに可用性の高いデータ接続、およびGrid ManagerとTenant Managerへの可用性の高い接続を提供します。

複数の管理ノードとゲートウェイノードのネットワークインターフェイスをハイアベイラビリティ（ HA ）グループにまとめることができます。HA グループのアクティブインターフェイスで障害が発生した場合、バックアップインターフェイスがワークロードを管理できます。

各 HA グループは、選択したノードの共有サービスへのアクセスを提供します。

* ゲートウェイノード、管理ノード、またはその両方を含むHAグループは、S3クライアントに可用性の高いデータ接続を提供します。
* 管理ノードだけで構成される HA グループは、 Grid Manager と Tenant Manager への可用性の高い接続を提供します。
* サービスアプライアンスとVMwareベースのソフトウェアノードのみを含むHAグループは、の可用性の高い接続を提供できますlink:../admin/manage-s3-select-for-tenant-accounts.html["S3 Select を使用する S3 テナント"]。S3 Select を使用する場合は HA グループを推奨しますが、必須ではありません。




== HA グループはどのように作成しますか？

. 1 つ以上の管理ノードまたはゲートウェイノードのネットワークインターフェイスを選択します。ノードに追加したグリッドネットワーク（ eth0 ）インターフェイス、クライアントネットワーク（ eth2 ）インターフェイス、 VLAN インターフェイス、またはアクセスインターフェイスを使用できます。
+

NOTE: DHCPによってIPアドレスが割り当てられたHAグループにインターフェイスを追加することはできません。

. プライマリインターフェイスとして指定するインターフェイスは 1 つです。プライマリインターフェイスは、障害が発生しないかぎり、アクティブインターフェイスです。
. バックアップインターフェイスの優先順位を決定します。
. グループに仮想 IP （ VIP ）アドレスを 1 ～ 10 個割り当てます。クライアントアプリケーションは、これらの VIP アドレスのいずれかを使用して StorageGRID に接続できます。


手順については、を参照してくださいlink:configure-high-availability-group.html["ハイアベイラビリティグループを設定する"]。



== アクティブインターフェイスとは何ですか。

通常の運用中は、 HA グループのすべての VIP アドレスが優先順位の最初のインターフェイスであるプライマリインターフェイスに追加されます。プライマリインターフェイスが使用可能な状態であれば、クライアントがグループの任意の VIP アドレスに接続するときに使用されます。つまり、通常の動作中は、プライマリインターフェイスがグループの「アクティブ」インターフェイスになります。

同様に、通常動作中は、HAグループの優先度の低いインターフェイスが「バックアップ」インターフェイスとして機能します。これらのバックアップインターフェイスは、プライマリ（現在アクティブ）インターフェイスが使用できなくなるまで使用されません。



== ノードの現在の HA グループのステータスを表示します

ノードが HA グループに割り当てられているかどうかを確認し、現在のステータスを確認するには、 * nodes * > * _node_name を選択します。

概要 * タブに HA グループ * のエントリが含まれている場合、そのノードは表示されている HA グループに割り当てられます。グループ名のあとの値は、 HA グループ内のノードの現在のステータスです。

* * Active * ： HA グループは現在このノードでホストされています。
* * バックアップ * ： HA グループは現在このノードを使用していません。バックアップインターフェイスです。
* *停止*：ハイアベイラビリティ（キープアライブ）サービスが手動で停止されているため、このノードでHAグループをホストできません。
* *障害*：次の1つ以上の理由により、このノードでHAグループをホストできません：
+
** ロードバランサ（ nginx-gw ）サービスがノードで実行されていません。
** ノードの eth0 または VIP インターフェイスが停止しています。
** ノードは停止しています。




この例では、プライマリ管理ノードが 2 つの HA グループに追加されています。このノードは、現在、 FabricPool クライアントグループのアクティブインターフェイスであり、クライアントグループのバックアップインターフェイスです。

image::../media/ha_group_primary_interface.png[HA グループのプライマリインターフェイス]



== アクティブインターフェイスに障害が発生するとどうなりますか。

VIP アドレスを現在ホストしているインターフェイスは、アクティブインターフェイスです。HA グループに複数のインターフェイスが含まれている場合にアクティブインターフェイスで障害が発生すると、 VIP アドレスは優先順位に従って、使用可能な最初のバックアップインターフェイスに移動します。そのインターフェイスに障害が発生すると、使用可能な次のバックアップインターフェイスに VIP アドレスが移動します。

フェイルオーバーは、次のいずれかの理由でトリガーされる可能性があります。

* インターフェイスが設定されているノードが停止する。
* インターフェイスが設定されているノードと他のすべてのノードとの接続が少なくとも 2 分間失われます。
* アクティブインターフェイスが停止する。
* ロードバランササービスが停止する。
* ハイアベイラビリティサービスが停止します。



NOTE: アクティブインターフェイスをホストするノードの外部でネットワーク障害が発生した場合、フェイルオーバーがトリガーされないことがあります。同様に、Grid ManagerまたはTenant Managerのサービスによってフェイルオーバーはトリガーされません。

フェイルオーバープロセスにかかる時間は通常数秒です。クライアントアプリケーションにほとんど影響がなく、通常の再試行で処理を続行できます。

障害が解決され、プライオリティの高いインターフェイスが再び使用可能になると、 VIP アドレスはプライオリティの高いインターフェイスに自動的に移動されます。
