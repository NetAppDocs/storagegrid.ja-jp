---
permalink: admin/use-s3-setup-wizard-steps.html 
sidebar: sidebar 
keywords: FabricPool and S3 setup wizard, object storage system, S3 application 
summary: S3セットアップウィザードを使用して、StorageGRID をS3アプリケーションのオブジェクトストレージシステムとして設定できます。 
---
= S3セットアップウィザードにアクセスして実行します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
S3セットアップウィザードを使用して、S3アプリケーションで使用するStorageGRID を設定できます。セットアップウィザードには、StorageGRID バケットへのアクセスとオブジェクトの保存に必要な値が表示されます。

.開始する前に
* あなたはを持っていますlink:admin-group-permissions.html["rootアクセス権限"]。
* でウィザードを使用するためのを確認しておきlink:use-s3-setup-wizard.html["考慮事項と要件"]ます。




== ウィザードにアクセスします

.手順
. を使用してGrid Managerにサインインしlink:web-browser-requirements.html["サポートされている Web ブラウザ"]ます。
. ダッシュボードに「FabricPool and S3 setup wizard」*バナーが表示された場合は、バナー内のリンクを選択します。バナーが表示されなくなった場合は、グリッドマネージャのヘッダーバーでヘルプアイコンを選択し、* FabricPool and S3 setup wizard *を選択します。
+
image::../media/help_menu.png[[ヘルプ]メニュー]

. FabricPool とS3のセットアップウィザードのページのS3アプリケーションセクションで、*今すぐ設定*を選択します。




== 手順1/6：HAグループを設定する

HAグループは、それぞれにStorageGRID ロードバランササービスが含まれるノードの集まりです。HAグループには、ゲートウェイノード、管理ノード、またはその両方を含めることができます。

HAグループを使用すると、S3データ接続の可用性を維持できます。HAグループのアクティブインターフェイスで障害が発生しても、バックアップインターフェイスでワークロードを管理できるため、S3処理への影響はほとんどありません。

このタスクの詳細については、を参照してくださいlink:managing-high-availability-groups.html["ハイアベイラビリティグループを管理します"]。

.手順
. 外部のロードバランサを使用する場合は、HAグループを作成する必要はありません。[Skip this step]*を選択し、に進みます<<手順2/6：ロードバランサエンドポイントの設定>>。
. StorageGRID ロードバランサを使用するには、新しいHAグループを作成するか、既存のHAグループを使用します。
+
[role="tabbed-block"]
====
.HA グループを作成します
--
.. 新しいHAグループを作成するには、*[HAグループの作成]*を選択します。
.. [詳細を入力]*ステップで、次のフィールドに値を入力します。
+
[cols="1a,2a"]
|===
| フィールド | 製品説明 


 a| 
HAグループ名
 a| 
このHAグループの一意の表示名。



 a| 
概要 （オプション）
 a| 
このHAグループの概要 。

|===
.. [インターフェイスの追加]*手順で、このHAグループで使用するノードインターフェイスを選択します。
+
列ヘッダーを使用して行をソートするか、検索キーワードを入力してインターフェイスをより迅速に検索します。

+
ノードは1つ以上選択できますが、ノードごとに選択できるインターフェイスは1つだけです。

.. [* prioritize interfaces]ステップでは、このHAグループのプライマリインターフェイスとバックアップインターフェイスを決定します。
+
行をドラッグして、*優先順位*列の値を変更します。

+
リストの最初のインターフェイスはプライマリインターフェイスです。プライマリインターフェイスは、障害が発生しないかぎり、アクティブインターフェイスです。

+
HAグループに複数のインターフェイスが含まれていて、アクティブインターフェイスで障害が発生した場合、仮想IP（VIP）アドレスは優先順位に従って最初のバックアップインターフェイスに移動します。そのインターフェイスに障害が発生すると、 VIP アドレスは次のバックアップインターフェイスに移動します。障害が解決されると、VIPアドレスは使用可能な最もプライオリティの高いインターフェイスに戻ります。

.. [IPアドレスの入力]*ステップで、次のフィールドに値を入力します。
+
[cols="1a,2a"]
|===
| フィールド | 製品説明 


 a| 
サブネットCIDR
 a| 
VIPサブネットのアドレス（CIDR表記）。IPv4アドレス、スラッシュ、およびサブネットの長さ（0～32）。

ネットワークアドレスにホストビットを設定しないでください。たとえば、 `192.16.0.0/22`です。



 a| 
ゲートウェイIPアドレス（オプション）
 a| 
StorageGRID へのアクセスに使用するS3 IPアドレスがStorageGRID VIPアドレスと同じサブネットにない場合は、StorageGRID VIPローカルゲートウェイのIPアドレスを入力します。ローカルゲートウェイの IP アドレスは VIP サブネット内にある必要があります。



 a| 
仮想IPアドレス
 a| 
HAグループ内のアクティブインターフェイスのVIPアドレスを1つ以上10個以下で入力します。すべてのVIPアドレスがVIPサブネット内にある必要があります。

IPv4アドレスを少なくとも1つ指定する必要があります。必要に応じて、追加の IPv4 アドレスと IPv6 アドレスを指定できます。

|===
.. [HAグループの作成]*を選択し、*[終了]*を選択してS3セットアップウィザードに戻ります。
.. [続行]*を選択して、ロードバランサの手順に進みます。


--
.既存のHAグループを使用する
--
.. 既存のHAグループを使用するには、*[HAグループの選択]*からHAグループ名を選択します。
.. [続行]*を選択して、ロードバランサの手順に進みます。


--
====




== 手順2/6：ロードバランサエンドポイントの設定

StorageGRID は、ロードバランサを使用してクライアントアプリケーションからワークロードを管理します。ロードバランシングは、複数のストレージノードにわたって速度と接続容量を最大化します。

すべてのゲートウェイノードと管理ノードに存在するStorageGRID ロードバランササービスを使用することも、外部（サードパーティ）のロードバランサに接続することもできます。StorageGRID ロードバランサを使用することを推奨します。

このタスクの詳細については、を参照してくださいlink:managing-load-balancing.html["ロードバランシングに関する考慮事項"]。

StorageGRID ロードバランササービスを使用するには、* StorageGRID load balancer *タブを選択し、使用するロードバランサエンドポイントを作成または選択します。外部ロードバランサを使用するには、*[外部ロードバランサ]*タブを選択し、設定済みのシステムに関する詳細を入力します。

[role="tabbed-block"]
====
.エンドポイントを作成します
--
.手順
. ロードバランサエンドポイントを作成するには、*[エンドポイントの作成]*を選択します。
. Enter endpoint details *ステップで、次のフィールドに値を入力します。
+
[cols="1a,2a"]
|===
| フィールド | 製品説明 


 a| 
名前
 a| 
エンドポイントのわかりやすい名前。



 a| 
ポート
 a| 
ロードバランシングに使用する StorageGRID ポート。最初に作成するエンドポイントのデフォルトは10433ですが、未使用の外部ポートを入力できます。80または443を入力すると、ゲートウェイノードでのみエンドポイントが設定されます。これらのポートは管理ノードで予約されているためです。

*注意:* 他のグリッド サービスで使用されるポートは許可されません。見るlink:../network/internal-grid-node-communications.html#storagegrid-internal-ports["StorageGRID の内部ポート"] 。



 a| 
クライアントタイプ
 a| 
は* S3 *にする必要があります。



 a| 
ネットワークプロトコル
 a| 
「* HTTPS *」を選択します。

*注*：TLS暗号化なしでのStorageGRID との通信はサポートされていますが、推奨されません。

|===
. [結合モードの選択]ステップで、結合モードを指定します。バインドモードは、任意のIPアドレスまたは特定のIPアドレスとネットワークインターフェイスを使用してエンドポイントにアクセスする方法を制御します。
+
[cols="1a,3a"]
|===
| モード | 製品説明 


 a| 
グローバル（デフォルト）
 a| 
クライアントは、任意のゲートウェイノードまたは管理ノードのIPアドレス、任意のネットワーク上の任意のHAグループの仮想IP（VIP）アドレス、または対応するFQDNを使用して、エンドポイントにアクセスできます。

このエンドポイントのアクセスを制限する必要がある場合を除き、 * グローバル * 設定（デフォルト）を使用します。



 a| 
HA グループの仮想 IP
 a| 
クライアントがこのエンドポイントにアクセスするには、HAグループの仮想IPアドレス（または対応するFQDN）を使用する必要があります。

このバインドモードのエンドポイントでは、エンドポイント用に選択したHAグループが重複しないかぎり、すべて同じポート番号を使用できます。



 a| 
ノードインターフェイス
 a| 
クライアントがこのエンドポイントにアクセスするには、選択したノードインターフェイスのIPアドレス（または対応するFQDN）を使用する必要があります。



 a| 
ノードタイプ
 a| 
選択したノードのタイプに基づいて、クライアントがこのエンドポイントにアクセスするには、いずれかの管理ノードのIPアドレス（または対応するFQDN）か、いずれかのゲートウェイノードのIPアドレス（または対応するFQDN）を使用する必要があります。

|===
. [Tenant access]ステップで、次のいずれかを選択します。
+
[cols="1a,2a"]
|===
| フィールド | 製品説明 


 a| 
Allow all tenants（デフォルト）
 a| 
すべてのテナントアカウントは、このエンドポイントを使用してバケットにアクセスできます。



 a| 
選択したテナントを許可します
 a| 
このエンドポイントを使用してバケットにアクセスできるのは、選択したテナントアカウントのみです。



 a| 
選択したテナントをブロックします
 a| 
選択したテナントアカウントは、このエンドポイントを使用してバケットにアクセスできません。他のすべてのテナントでこのエンドポイントを使用できます。

|===
. [証明書の添付]*ステップで、次のいずれかを選択します。
+
[cols="1a,2a"]
|===
| フィールド | 製品説明 


 a| 
証明書のアップロード（推奨）
 a| 
このオプションは、CA署名済みサーバ証明書、証明書秘密鍵、およびオプションのCAバンドルをアップロードする場合に使用します。



 a| 
証明書の生成
 a| 
このオプションは、自己署名証明書を生成する場合に使用します。入力する項目の詳細については、を参照してくださいlink:configuring-load-balancer-endpoints.html["ロードバランサエンドポイントを設定する"]。



 a| 
StorageGRID S3証明書を使用する
 a| 
このオプションは、StorageGRID グローバル証明書のカスタムバージョンをすでにアップロードまたは生成している場合にのみ使用します。詳細は、を参照してください link:configuring-custom-server-certificate-for-storage-node.html["S3 API証明書の設定"] 。

|===
. [Finish]*を選択してS3セットアップウィザードに戻ります。
. [続行]*を選択してテナントとバケットの手順に進みます。



NOTE: エンドポイント証明書の変更がすべてのノードに適用されるまでに最大 15 分かかることがあります。

--
.既存のロードバランサエンドポイントを使用する
--
.手順
. 既存のエンドポイントを使用する場合は、*[ロードバランサエンドポイントの選択]*からそのエンドポイントの名前を選択します。
. [続行]*を選択してテナントとバケットの手順に進みます。


--
.外部のロードバランサを使用する
--
.手順
. 外部のロードバランサを使用するには、次のフィールドに値を入力します。
+
[cols="1a,2a"]
|===
| フィールド | 製品説明 


 a| 
FQDN
 a| 
外部ロードバランサの完全修飾ドメイン名（FQDN）。



 a| 
ポート
 a| 
S3アプリケーションが外部ロードバランサへの接続に使用するポート番号。



 a| 
証明書
 a| 
外部ロードバランサのサーバ証明書をコピーして、このフィールドに貼り付けます。

|===
. [続行]*を選択してテナントとバケットの手順に進みます。


--
====


== ステップ3 / 6：テナントとバケットを作成

テナントは、S3アプリケーションを使用してStorageGRID でオブジェクトの格納と読み出しを行うことができるエンティティです。各テナントには、独自のユーザ、アクセスキー、バケット、オブジェクト、および特定の機能セットがあります。

バケットは、テナントのオブジェクトとオブジェクトメタデータを格納するためのコンテナです。テナントには多数のバケットが含まれている場合もありますが、このウィザードを使用すると、テナントとバケットを最も簡単かつ迅速に作成できます。バケットの追加やオプションの設定があとで必要になった場合は、Tenant Managerを使用できます。

このタスクの詳細については、およびを参照してくださいlink:creating-tenant-account.html["テナントアカウントを作成する"]link:../tenant/creating-s3-bucket.html["S3 バケットを作成する"]。

.手順
. テナントアカウントの名前を入力します。
+
テナント名は一意である必要はありません。作成したテナントアカウントには、一意の数値アカウント ID が割り当てられます。

. StorageGRIDシステムが使用するかどうかに基づいて、テナントアカウントのルートアクセスを定義します。link:using-identity-federation.html["アイデンティティフェデレーション"] 、link:how-sso-works.html["シングルサインオン（SSO）"] 、またはその両方。
+
[cols="1a,2a"]
|===
| オプション | 手順 


 a| 
アイデンティティフェデレーションが有効になっていない場合
 a| 
ローカルrootユーザとしてテナントにサインインするときに使用するパスワードを指定します。



 a| 
アイデンティティフェデレーションが有効になっている場合
 a| 
.. テナントに含める既存のフェデレーテッドグループを選択しますlink:../tenant/tenant-management-permissions.html["rootアクセス権限"]。
.. 必要に応じて、ローカルrootユーザとしてテナントにサインインする際に使用するパスワードを指定します。




 a| 
アイデンティティフェデレーションとシングルサインオン（SSO）の両方が有効になっている場合
 a| 
テナントに含める既存のフェデレーテッドグループを選択しますlink:../tenant/tenant-management-permissions.html["rootアクセス権限"]。ローカルユーザはサインインできません。

|===
. ルートユーザのアクセスキーIDとシークレットアクセスキーをウィザードで作成する場合は、* Create root user S3 access key automatically *を選択します。
+
テナントのユーザをrootユーザだけにする場合は、このオプションを選択します。他のユーザがこのテナントを使用する場合は、link:../tenant/index.html["Tenant Managerを使用"]キーと権限を設定します。

. このテナント用のバケットを今すぐ作成する場合は、*[このテナント用にバケットを作成する]*を選択します。
+

TIP: グリッドでS3オブジェクトロックが有効になっている場合、この手順で作成したバケットではS3オブジェクトロックが有効になりません。このS3アプリケーションでS3 Object Lockバケットを使用する必要がある場合は、ここでバケットを作成することを選択しないでください。代わりに、あとでTenant Managerを使用しlink:../tenant/creating-s3-bucket.html["バケットを作成します"]ます。

+
.. S3アプリケーションが使用するバケットの名前を入力します。たとえば、 `s3-bucket`です。
+
バケットの作成後にバケット名を変更することはできません。

.. このバケットの*[Region]*を選択します。
+
(`us-east-1`将来ILMを使用してバケットのリージョンに基づいてオブジェクトをフィルタリングする予定がないかぎり、デフォルトのリージョンを使用します）。



. [作成して続行]*を選択します。




== [[download-data]]ステップ4/6：データをダウンロードします

ダウンロードデータステップでは、1つまたは2つのファイルをダウンロードして、設定した内容の詳細を保存できます。

.手順
. [Create root user S3 access key automatically]*を選択した場合は、次のいずれかまたは両方を実行します。
+
** テナントアカウント名、アクセスキーID、シークレットアクセスキーが記載されたファイルをダウンロードするには、*[アクセスキーのダウンロード]*を選択し `.csv`ます。
** コピーアイコン（）を選択しimage:../media/icon_tenant_copy_url.png["コピーアイコン"]て、アクセスキーIDとシークレットアクセスキーをクリップボードにコピーします。


. [設定値をダウンロード]*を選択して、ロードバランサエンドポイント、テナント、バケット、およびrootユーザの設定を含むファイルをダウンロードし `.txt`ます。
. この情報を安全な場所に保存してください。
+

CAUTION: 両方のアクセスキーをコピーするまで、このページを閉じないでください。このページを閉じると、キーは使用できなくなります。この情報はStorageGRID システムからデータを取得するために使用できるため、必ず安全な場所に保存してください。

. プロンプトが表示されたら、チェックボックスをオンにして、キーをダウンロードまたはコピーしたことを確認します。
. [続行]*を選択してILMルールとポリシーの手順に進みます。




== 手順5 / 6：S3のILMルールとILMポリシーを確認します

情報ライフサイクル管理（ILM）ルールは、StorageGRID システム内のすべてのオブジェクトの配置、期間、取り込み動作を制御します。StorageGRID に含まれているILMポリシーは、すべてのオブジェクトのレプリケートコピーを2つ作成します。このポリシーは、新しいポリシーを少なくとも1つアクティブ化するまで有効です。

.手順
. ページに表示された情報を確認します。
. 新しいテナントまたはバケットに属するオブジェクトに対する具体的な手順を追加する場合は、新しいルールと新しいポリシーを作成します。およびを参照してくださいlink:../ilm/access-create-ilm-rule-wizard.html["ILM ルールを作成する"]link:../ilm/ilm-policy-overview.html["ILMポリシーを使用する"]。
. [I have review these steps and understand what I need to do]*を選択します。
. チェックボックスをオンにして、次に何をすべきかを理解していることを示します。
. [続行]*を選択して*[概要]*に進みます。




== ステップ6 / 6：まとめの確認

.手順
. 概要を確認します。
. 次の手順の詳細をメモしておいてください。S3クライアントに接続する前に必要になる可能性がある追加の設定について説明しています。たとえば、*[Sign in as root]*を選択するとTenant Managerに移動し、テナントユーザの追加、バケットの作成、バケットの設定の更新を行うことができます。
. [ 完了 ] を選択します。
. StorageGRID からダウンロードしたファイルまたは手動で取得した値を使用して、アプリケーションを設定します。

