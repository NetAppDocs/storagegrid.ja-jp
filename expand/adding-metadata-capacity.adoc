---
permalink: expand/adding-metadata-capacity.html 
sidebar: sidebar 
keywords: metadata capacity, add, adding, expand, expansion, guidelines, Storage Nodes, metadata storage, StorageGRID 
summary: オブジェクトメタデータ用のスペースを十分に確保するために、各サイトに新しいストレージノードを追加する拡張手順 の実行が必要になる場合があります。 
---
= StorageGRIDでメタデータ容量を追加するためのガイドライン
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
オブジェクトメタデータ用のスペースを十分に確保するために、各サイトに新しいストレージノードを追加する拡張手順 の実行が必要になる場合があります。

StorageGRID は、各ストレージノードのボリューム 0 にオブジェクトメタデータ用のスペースをリザーブします。すべてのオブジェクトメタデータのコピーが各サイトに 3 つ保持され、すべてのストレージノードに均等に分散されます。

Grid Manager を使用してストレージノードのメタデータ容量を監視し、メタデータ容量がどれくらいの速さで消費されているかを見積もることができます。また、使用済みメタデータスペースが特定のしきい値に達すると、ストレージノードに対して * Low metadata storage * アラートがトリガーされます。

グリッドの使用方法によっては、グリッドのオブジェクトメタデータ容量がオブジェクトのストレージ容量よりも早く消費される場合があります。たとえば、一般に大量の小さいオブジェクトを取り込みたり、大量のユーザメタデータやタグをオブジェクトに追加したりする場合、オブジェクトストレージの容量が十分に残っていても、メタデータ容量を増やすためにストレージノードの追加が必要になることがあります。

詳細については、次を参照してください。

* link:../admin/managing-object-metadata-storage.html["オブジェクトメタデータストレージを管理する"]
* link:../monitor/monitoring-storage-capacity.html#monitor-object-metadata-capacity-for-each-storage-node["各ストレージノードのオブジェクトメタデータ容量を監視します"]




== メタデータ容量を増やす場合のガイドライン

ストレージノードを追加してメタデータ容量を増やす前に、次のガイドラインと制限事項を確認してください。

* 十分なオブジェクトストレージ容量がある場合は、オブジェクトメタデータ用の使用可能なスペースが増えると、 StorageGRID システムに格納できるオブジェクトの数も増えます。
* 各サイトにストレージノードを 1 つ以上追加して、グリッドのメタデータ容量を増やすことができます。
* 特定のストレージノードでオブジェクトメタデータ用にリザーブされている実際のスペースは、 Metadata Reserved Space ストレージオプション（システム全体の設定）、ノードに割り当てられている RAM の容量、ノードのボリューム 0 のサイズによって異なります。
* メタデータはボリューム0にのみ格納されるため、既存のストレージノードにストレージボリュームを追加してもメタデータ容量を増やすことはできません。
* 新しいサイトを追加してメタデータ容量を増やすことはできません。
* StorageGRID は、すべてのオブジェクトメタデータのコピーを各サイトで 3 つ保持します。このため、システムのメタデータ容量は最小のサイトのメタデータ容量によって制限されます。
* メタデータ容量を追加するときは、各サイトに同じ数のストレージノードを追加する必要があります。


メタデータのみのストレージノードには、次の特定のハードウェア要件があります。

* StorageGRIDアプライアンスを使用している場合、メタデータのみのノードを設定できるのは、1.9TBまたは3.8TBのドライブを12本搭載したSGF6112アプライアンスだけです。
* ソフトウェアベースのノードを使用する場合は、メタデータのみのノードリソースが既存のストレージノードリソースと一致している必要があります。例：
+
** 既存のStorageGRIDサイトでSG6000またはSG6100アプライアンスを使用している場合は、ソフトウェアベースのメタデータのみのノードが次の最小要件を満たしている必要があります。
+
*** 128GBのRAM
*** 8コアCPU
*** 8TB SSDまたはCassandraデータベース用同等のストレージ（rangedb/0）


** 既存のStorageGRIDサイトが 24 GB RAM、8 コア CPU、3 TB または 4 TB のメタデータ ストレージを備えた仮想ストレージ ノードを使用している場合、ソフトウェア ベースのメタデータ専用ノードでは同様のリソース (24 GB RAM、8 コア CPU、4 TB のメタデータ ストレージ (rangedb/0)) を使用する必要があります。


* 新しいStorageGRIDサイトを追加するときは、新しいサイトの総メタデータ容量が少なくとも既存のStorageGRIDサイトと一致し、新しいサイトのリソースが既存のStorageGRIDサイトのストレージノードと一致している必要があります。


を参照してくださいlink:../admin/managing-object-metadata-storage.html["Metadata Reserved Spaceとは何かの概要"]。



== ストレージノードを追加したときにメタデータが再配分される仕組み

拡張時にストレージノードを追加すると、 StorageGRID によって、既存のオブジェクトメタデータが各サイトの新しいノードに再配分され、グリッドの全体的なメタデータ容量が増加します。ユーザによる操作は必要ありません。

次の図は、拡張でストレージノードを追加した場合に StorageGRID によってオブジェクトメタデータがどのように再配分されるかを示しています。図の左側は、拡張前の 3 つのストレージノードのボリューム 0 を表しています。メタデータが各ノードの使用可能なメタデータスペースの大部分を消費しており、「 Low metadata storage * 」アラートがトリガーされています。

図の右側は、サイトへの 2 つのストレージノードの追加後に既存のメタデータがどのように再配置されるかを示しています。各ノードのメタデータの量が減少し、「 Low metadata storage * 」アラートがトリガーされなくなり、メタデータに使用できるスペースが増えました。

image::../media/metadata_space_after_expansion.png[2つのストレージノードを追加したあとに再配置されたメタデータの図]
