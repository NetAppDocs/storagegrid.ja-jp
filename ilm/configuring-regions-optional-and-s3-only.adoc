---
permalink: ilm/configuring-regions-optional-and-s3-only.html 
sidebar: sidebar 
keywords: S3 regions, region, ilm rules 
summary: ILM ルールは S3 バケットが作成されたリージョンに基づいてオブジェクトをフィルタリングできるため、オブジェクトのリージョンによって異なるストレージに格納できます。 
---
= リージョンを設定（オプション、 S3 のみ）
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ILM ルールは S3 バケットが作成されたリージョンに基づいてオブジェクトをフィルタリングできるため、オブジェクトのリージョンによって異なるストレージに格納できます。

S3 バケットのリージョンをルールのフィルタとして使用する場合は、システム内のバケットで使用できるリージョンを最初に作成しておく必要があります。


NOTE: バケットの作成後にバケットのリージョンを変更することはできません。

.開始する前に
* Grid Managerにサインインしておきますlink:../admin/web-browser-requirements.html["サポートされている Web ブラウザ"]。
* そうだな link:../admin/admin-group-permissions.html["特定のアクセス権限"]


.タスクの内容
S3 バケットを作成する際は、特定のリージョンにバケットを作成するように指定できます。リージョンを指定すると地理的にユーザにより近い場所にバケットを配置でき、レイテンシの最適化、コストの最小化、規制要件への対応を実現できます。

ILM ルールの作成時には、 S3 バケットに関連付けられているリージョンを高度なフィルタとして使用できます。たとえば、リージョンで作成されたS3バケット内のオブジェクトにのみ適用するルールを設計でき `us-west-2`ます。そのうえで、そのリージョン内のデータセンターサイトにあるストレージノードにオブジェクトのコピーを配置してレイテンシを最適化するように指定できます。

リージョンを設定する場合は、次の注意事項に従ってください。

* デフォルトでは、すべてのバケットがリージョンに属しているとみなされ `us-east-1`ます。
* Tenant Managerまたはテナント管理APIを使用してバケットを作成するとき、またはS3 PUT Bucket API要求のLocationConstraint要求要素を使用してバケットを作成するときにデフォルト以外のリージョンを指定する前に、Grid Managerを使用してリージョンを作成する必要があります。StorageGRIDで定義されていないリージョンをPUT Bucket要求で使用すると、エラーが発生します。
* S3 バケットの作成時には正確なリージョン名を使用する必要があります。リージョン名では大文字と小文字が区別されます。有効な文字は、数字、アルファベット、およびハイフンです。
+

NOTE: euはeu-west-1の別名とはみなされません。EU または eu-west-1 リージョンを使用する場合は、正確な名前を使用する必要があります。

* ポリシー（アクティブまたは非アクティブ）に割り当てられているルールで使用されているリージョンを削除または変更することはできません。
* 無効なリージョンをILMルールの高度なフィルタとして使用すると、そのルールをポリシーに追加できません。
+
無効なリージョンは、ILMルールで高度なフィルタとして使用しているリージョンをあとで削除した場合や、グリッド管理APIを使用してルールを作成して定義していないリージョンを指定した場合に発生する可能性があります。

* あるリージョンを使用して S3 バケットを作成したあとにそのリージョンを削除した場合、高度なフィルタ「 Location Constraint 」を使用してそのバケット内のオブジェクトを検索するにはリージョンを再び追加する必要があります。


.手順
. [* ILM*>* Regions* ] を選択します。
+
[Regions]ページが表示されます。

. [すべての地域]タブまたは[デフォルトの地域]タブを選択します。
+
[role="tabbed-block"]
====
.すべての地域
--
「*すべての地域*」タブには、現在定義されている地域が表示されます。これには、変更または削除できない、定義されているデフォルトの地域も含まれます。

.. リージョンを追加するには、*[別のリージョンを追加]*を選択します。
.. S3 バケットの作成時に使用するリージョンの名前を入力します。
+
対応する S3 バケットの作成時には、正確なリージョン名を LocationConstraint 要求の要素として使用する必要があります。

.. 未使用領域を削除するには、削除アイコンを選択しimage:../media/icon-x-to-remove.png["削除アイコン"]ます。
+
いずれかのポリシー（アクティブまたは非アクティブ）で現在使用されているリージョンを削除しようとすると、エラーメッセージが表示されます。

.. 変更が完了したら、 * 保存 * を選択します。
+
これで、Create ILM Ruleウィザードのステップ1の[Advanced filters]セクションでリージョンを選択できます。を参照して link:create-ilm-rule-enter-details.html#use-advanced-filters-in-ilm-rules["ILM ルールで高度なフィルタを使用します"]



--
.デフォルトのリージョン
--
デフォルト領域*タブには、現在定義されているデフォルト領域が表示されます。この領域は変更できます。

.. デフォルトのリージョンを変更するには、*デフォルトのリージョン*ドロップダウンリストで使用可能なオプションからリージョン名を選択します。
.. [ 保存（ Save ） ] を選択します。


--
====

