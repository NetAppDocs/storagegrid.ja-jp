---
permalink: ilm/configuring-regions-optional-and-s3-only.html 
sidebar: sidebar 
keywords: S3 regions, region, ilm rules 
summary: ILM ルールでは、S3 バケットが作成されるオプションのリージョンに基づいてオブジェクトをフィルタリングできるため、異なるリージョンのオブジェクトを異なるストレージの場所に保存できます。 
---
= StorageGRIDの S3 リージョンを構成する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ILM ルールでは、S3 バケットが作成されるオプションのリージョンに基づいてオブジェクトをフィルタリングできるため、異なるリージョンのオブジェクトを異なるストレージの場所に保存できます。

S3 バケットのリージョンをルールのフィルタとして使用する場合は、システム内のバケットで使用できるリージョンを最初に作成しておく必要があります。


NOTE: バケットの作成後にバケットのリージョンを変更することはできません。

.開始する前に
* Grid Managerにサインインしておきますlink:../admin/web-browser-requirements.html["サポートされている Web ブラウザ"]。
* そうだな link:../admin/admin-group-permissions.html["特定のアクセス権限"]


.タスクの内容
S3 バケットを作成する際は、特定のリージョンにバケットを作成するように指定できます。リージョンを指定すると地理的にユーザにより近い場所にバケットを配置でき、レイテンシの最適化、コストの最小化、規制要件への対応を実現できます。

ILM ルールの作成時には、 S3 バケットに関連付けられているリージョンを高度なフィルタとして使用できます。たとえば、リージョンで作成されたS3バケット内のオブジェクトにのみ適用するルールを設計でき `us-west-2`ます。そのうえで、そのリージョン内のデータセンターサイトにあるストレージノードにオブジェクトのコピーを配置してレイテンシを最適化するように指定できます。

リージョンを設定する場合は、次の注意事項に従ってください。

* デフォルトでは、すべてのバケットがリージョンに属しているとみなされ `us-east-1`ます。
* テナント マネージャまたはテナント管理 API を使用してバケットを作成するとき、または S3 PUT バケット API リクエストの LocationConstraint リクエスト要素を使用してバケットを作成するときに、デフォルト以外のリージョンを指定するには、まずグリッド マネージャを使用してリージョンを作成する必要があります。  PUT Bucket リクエストがStorageGRIDで定義されていないリージョンを使用すると、エラーが発生します。
* S3 バケットの作成時には正確なリージョン名を使用する必要があります。リージョン名では大文字と小文字が区別されます。有効な文字は、数字、アルファベット、およびハイフンです。
+

NOTE: EU は eu-west-1 のエイリアスとはみなされません。  EU または eu-west-1 リージョンを使用する場合は、正確な名前を使用する必要があります。

* ポリシー（アクティブまたは非アクティブ）に割り当てられているルールで使用されているリージョンを削除または変更することはできません。
* 無効なリージョンをILMルールの高度なフィルタとして使用すると、そのルールをポリシーに追加できません。
+
ILM ルールでリージョンを詳細フィルタとして使用したが、後でそのリージョンを削除した場合、またはグリッド管理 API を使用してルールを作成し、定義していないリージョンを指定した場合、無効なリージョンが発生する可能性があります。

* あるリージョンを使用して S3 バケットを作成したあとにそのリージョンを削除した場合、高度なフィルタ「 Location Constraint 」を使用してそのバケット内のオブジェクトを検索するにはリージョンを再び追加する必要があります。


.手順
. [* ILM*>* Regions* ] を選択します。
+
「リージョン」ページが表示されます。

. *すべての地域*または*デフォルトの地域*タブを選択します。
+
[role="tabbed-block"]
====
.すべての地域
--
*すべてのリージョン* タブには、定義されているデフォルトのリージョンを含む、現在定義されているリージョンが一覧表示されます。


NOTE: *すべての地域*タブではデフォルトの地域を削除または変更することはできません。デフォルトの地域を変更するには、「*デフォルトの地域*」タブを使用します。

.. 地域を追加するには、「別の地域を追加」を選択します。
.. S3 バケットの作成時に使用するリージョンの名前を入力します。
+
対応する S3 バケットの作成時には、正確なリージョン名を LocationConstraint 要求の要素として使用する必要があります。

.. 未使用領域を削除するには、削除アイコンを選択しimage:../media/icon-x-to-remove.png["削除アイコン"]ます。
+
いずれかのポリシー（アクティブまたは非アクティブ）で現在使用されているリージョンを削除しようとすると、エラーメッセージが表示されます。

.. 変更が完了したら、 * 保存 * を選択します。
+
これで、Create ILM Ruleウィザードのステップ1の[Advanced filters]セクションでリージョンを選択できます。を参照して link:create-ilm-rule-enter-details.html#use-advanced-filters-in-ilm-rules["ILM ルールで高度なフィルタを使用します"]



--
.デフォルトの地域
--
*デフォルト リージョン* タブには、現在定義されているデフォルト リージョンが表示されます。これは変更できます。

.. デフォルトのリージョンを変更するには、[*デフォルトのリージョン*] ドロップダウン リストで使用可能なオプションからリージョン名を選択します。
.. [ 保存（ Save ） ] を選択します。


--
====

