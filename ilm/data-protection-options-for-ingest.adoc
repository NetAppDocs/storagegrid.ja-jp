---
permalink: ilm/data-protection-options-for-ingest.html 
sidebar: sidebar 
keywords: ingest options, balanced ingest, strict ingest, dual-commit ingest 
summary: ILMルールを作成するときは、取り込み時にオブジェクトを保護するための3つのオプション（Dual commit、Strict、またはBalanced）のいずれかを指定します。 
---
= 取り込みオプション
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ILMルールを作成するときは、取り込み時にオブジェクトを保護するための3つのオプション（Dual commit、Strict、またはBalanced）のいずれかを指定します。

選択したオプションに応じて、 StorageGRID は、中間コピーを作成してオブジェクトをキューに登録し、あとで ILM 評価を実行するか、または同期配置を使用してコピーをただちに作成して ILM 要件を満たします。



== 取り込みオプションのフローチャート

次のフローチャートは、 3 つの取り込みオプションのそれぞれを使用する ILM ルールにオブジェクトが一致した場合の動作を示しています。

image::../media/ingest_object_lifecycle.png[各取り込みオプションでオブジェクトがどのように取り込まれるかを示す図]



== デュアルコミット

[Dual commit]オプションを選択すると、StorageGRIDは2つの異なるストレージノードに中間オブジェクトコピーをただちに作成し、「ingest successful」メッセージをクライアントに返します。オブジェクトは ILM 評価のキューに登録され、ルールの配置手順を満たすコピーはあとで作成されます。デュアルコミットの直後にILMポリシーを処理できないと、サイト障害からの保護の実現に時間がかかることがあります。

次のいずれかの場合に Dual commit オプションを使用します。

* マルチサイトの ILM ルールを使用しており、クライアントの取り込みレイテンシを考慮する必要があります。Dual commitを使用する場合は、デュアルコミットコピーがILMを満たしていない場合にデュアルコミットコピーを作成および削除する追加作業をグリッドで実行できるようにする必要があります。具体的には：
+
** ILM のバックログが発生しないように、グリッドの負荷が十分に低い必要があります。
** グリッドにハードウェアリソース（ IOPS 、 CPU 、メモリ、ネットワーク帯域幅など）が余剰である。


* マルチサイトの ILM ルールを使用していて、通常はサイト間の WAN 接続のレイテンシが高くなっているか、帯域幅が制限されている。このシナリオでは、 Dual commit オプションを使用するとクライアントのタイムアウトを回避できます。Dual commit オプションを選択する前に、現実的なワークロードでクライアントアプリケーションをテストする必要があります。




== Balanced（デフォルト）

Balanced オプションを選択した場合も、 StorageGRID は、取り込み時に同期配置を使用してルールの配置手順で指定されたすべてのコピーをただちに作成します。Strictオプションとは対照的に、すべてのコピーをただちに作成できない場合、StorageGRID は代わりにDual commitを使用します。ILMポリシーが複数のサイトに配置を使用していて、サイト障害から即座に保護できない場合は、* ILM placement unachievable *アラートがトリガーされます。

Balanced オプションは、データ保護、グリッドパフォーマンス、および取り込みの成功の最適な組み合わせを実現するために使用します。Balancedは、Create ILM Ruleウィザードのデフォルトのオプションです。



== strict

Strict オプションを選択すると、 StorageGRID は取り込み時に同期配置を使用してルールの配置手順で指定されたすべてのオブジェクトコピーをただちに作成します。必要なストレージの場所が一時的に使用できないなどの理由で、StorageGRID がすべてのコピーを作成できない場合、取り込みは失敗します。クライアントは処理を再試行する必要があります。

Strict オプションは、 ILM ルールに指定された場所にのみオブジェクトをただちに格納するための運用または規制上の要件がある場合に使用してください。たとえば、規制要件を満たすために、Strictオプションと高度なフィルタ「Location Constraint」を使用して、特定のデータセンターにオブジェクトが格納されないようにする必要がある場合があります。

を参照して link:example-5-ilm-rules-and-policy-for-strict-ingest-behavior.html["例 5 ：取り込み動作が Strict の場合の ILM ルールとポリシー"]
