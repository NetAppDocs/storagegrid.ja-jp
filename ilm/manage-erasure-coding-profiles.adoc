---
permalink: ilm/manage-erasure-coding-profiles.html 
sidebar: sidebar 
keywords: rename erasure-coding profile, ec profile 
summary: イレイジャーコーディングプロファイルの詳細を表示し、必要に応じてプロファイルの名前を変更できます。現在どのILMルールでも使用されていないイレイジャーコーディングプロファイルは非アクティブ化できます。 
---
= イレイジャーコーディングプロファイルの管理
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
イレイジャーコーディングプロファイルの詳細を表示し、必要に応じてプロファイルの名前を変更できます。現在どのILMルールでも使用されていないイレイジャーコーディングプロファイルは非アクティブ化できます。

.開始する前に
* Grid Managerにサインインしておきますlink:../admin/web-browser-requirements.html["サポートされている Web ブラウザ"]。
* あなたはを持っていますlink:../admin/admin-group-permissions.html["必要なアクセス権限"]。




== イレイジャーコーディングプロファイルの詳細の表示

イレイジャーコーディングプロファイルの詳細を表示して、プロファイルのステータス、使用されているイレイジャーコーディングスキームなどの情報を確認できます。

.手順
. *構成* > *システム* > *消去コーディング*を選択します。
. プロファイルを選択します。プロファイルの詳細ページが表示されます。
. 必要に応じて、[ILM rules]タブで、プロファイルを使用するILMルールと、それらのルールを使用するILMポリシーのリストを確認します。
. 必要に応じて、プロファイルのストレージプール内の各ストレージノード（ノードが配置されているサイトやストレージの使用状況など）の詳細を[ストレージノード]タブで確認します。




== イレイジャーコーディングプロファイルの名前を変更する

イレイジャーコーディングプロファイルの名前を変更すると、プロファイルの内容がわかりやすくなります。

.手順
. *構成* > *システム* > *消去コーディング*を選択します。
. 名前を変更するプロファイルを選択します。
. [ 名前の変更 *] を選択します。
. イレイジャーコーディングプロファイルの一意の名前を入力します。
+
イレイジャーコーディングプロファイル名は、ILMルールの配置手順でストレージプール名に追加されます。

+

NOTE: イレイジャーコーディングプロファイル名は一意である必要があります。既存のプロファイルの名前を使用すると、そのプロファイルが非アクティブ化されていても、検証エラーが発生します。

. [ 保存（ Save ） ] を選択します。




== イレイジャーコーディングプロファイルを非アクティブ化する

イレイジャーコーディングプロファイルの使用を予定していない場合や現在どのILMルールでも使用されていない場合は、非アクティブ化できます。


TIP: イレイジャーコーディングデータの修復処理や運用停止手順が実行中でないことを確認する。いずれかの処理の実行中にイレイジャーコーディングプロファイルを非アクティブ化しようとすると、エラーメッセージが返されます。

.タスクの内容
次のいずれかに該当する場合、StorageGRIDではイレイジャーコーディングプロファイルを非アクティブ化できません。

* イレイジャーコーディングプロファイルがILMルールで使用されている。
* イレイジャーコーディングプロファイルはどのILMルールでも使用されなくなりましたが、プロファイルのオブジェクトデータフラグメントとパリティフラグメントは引き続き存在します。


.手順
. *構成* > *システム* > *消去コーディング*を選択します。
. [Active]タブの*[Status]*列で、非アクティブ化するイレイジャーコーディングプロファイルがILMルールで使用されていないことを確認します。
+
イレイジャーコーディングプロファイルがILMルールで使用されている場合、非アクティブ化することはできません。この例では、2+1のData Center 1プロファイルが少なくとも1つのILMルールで使用されています。

+
image::../media/ec_profile_used_in_ilm_rule.png[ILM ルールで使用されている EC プロファイル]

. プロファイルが ILM ルールで使用されている場合は、次の手順を実行します。
+
.. [* ILM*>* Rules] を選択します。
.. 各ルールを選択し、保持図を確認して、非アクティブ化するイレイジャーコーディングプロファイルがルールで使用されているかどうかを確認します。
.. 非アクティブ化するイレイジャーコーディングプロファイルがILMルールで使用されている場合は、そのルールがILMポリシーで使用されているかどうかを確認します。
.. イレイジャーコーディングプロファイルの使用場所に応じて、表の追加の手順を実行します。
+
[cols="2a,4a,1a"]
|===
| プロファイルはどこで使用されていますか？ | プロファイルを非アクティブ化する前に実行する追加手順 | 追加の手順を参照してください 


 a| 
ILM ルールでは使用されません
 a| 
追加の手順は必要ありません。この手順に進みます。
 a| 
_ なし _



 a| 
ILM ポリシーで使用されたことのない ILM ルール
 a| 
... 該当する ILM ルールをすべて編集または削除します。ルールを編集する場合は、イレイジャーコーディングプロファイルを使用しているすべての配置を削除します。
... この手順に進みます。

 a| 
link:working-with-ilm-rules-and-ilm-policies.html["ILM ルールおよび ILM ポリシーの操作"]



 a| 
アクティブなILMポリシーに含まれるILMルールで使用
 a| 
... ポリシーのクローンを作成します。
... イレイジャーコーディングプロファイルを使用しているILMルールを削除します。
... オブジェクトを確実に保護するために、新しい ILM ルールを 1 つ以上追加します。
... 新しいポリシーを保存、シミュレート、およびアクティブ化します。
... 新しいポリシーが適用され、追加した新しいルールに基づいて既存のオブジェクトが新しい場所に移動されるまで待ちます。
+
* 注： StorageGRID システムのオブジェクト数とサイズによっては、新しい ILM ルールに基づいてオブジェクトを新しい場所に移動するのに数週間から数カ月かかる場合があります。

+
データに関連付けられているイレイジャーコーディングプロファイルは安全に非アクティブ化できますが、非アクティブ化処理は失敗します。プロファイルを非アクティブ化する準備ができていない場合は、エラーメッセージが表示されます。

... ポリシーから削除したルールを編集または削除します。ルールを編集する場合は、イレイジャーコーディングプロファイルを使用しているすべての配置を削除します。
... この手順に進みます。

 a| 
link:creating-ilm-policy.html["ILMポリシーを作成します"]

link:working-with-ilm-rules-and-ilm-policies.html["ILM ルールおよび ILM ポリシーの操作"]



 a| 
ILMポリシーに含まれるILMルールで使用
 a| 
... ポリシーを編集します。
... イレイジャーコーディングプロファイルを使用しているILMルールを削除します。
... すべてのオブジェクトが保護されるように 1 つ以上の新しい ILM ルールを追加します。
... ポリシーを保存します。
... ポリシーから削除したルールを編集または削除します。ルールを編集する場合は、イレイジャーコーディングプロファイルを使用しているすべての配置を削除します。
... この手順に進みます。

 a| 
link:creating-ilm-policy.html["ILMポリシーを作成します"]

link:working-with-ilm-rules-and-ilm-policies.html["ILM ルールおよび ILM ポリシーの操作"]

|===
.. [Erasure-Coding Profiles]ページをリフレッシュして、プロファイルがILMルールで使用されていないことを確認します。


. プロファイルが ILM ルールで使用されていない場合は、ラジオボタンを選択し、 * Deactivate * を選択します。[Deactivate erase-coding profile]ダイアログボックスが表示されます。
+

TIP: 各プロファイルがどのルールでも使用されていない限り、複数のプロファイルを選択して同時に非アクティブにすることができます。

. プロファイルを非活動化してもよい場合は、 [ * 非活動化 * （ * Deactivate * ） ] を選択します。


.結果
* StorageGRIDがイレイジャーコーディングプロファイルを非アクティブ化できる場合、ステータスは[Deactivated]になります。これで、どの ILM ルールにもこのプロファイルを選択できなくなりました。非アクティブ化されたプロファイルを再アクティブ化することはできません。
* StorageGRID がプロファイルを非アクティブ化できない場合は、エラー・メッセージが表示されます。たとえば、オブジェクトデータがまだこのプロファイルに関連付けられている場合は、エラーメッセージが表示されます。無効化プロセスを再度実行する前に、数週間待つ必要がある場合があります。

