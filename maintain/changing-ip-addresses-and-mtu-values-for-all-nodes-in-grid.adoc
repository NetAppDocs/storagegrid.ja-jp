---
permalink: maintain/changing-ip-addresses-and-mtu-values-for-all-nodes-in-grid.html 
sidebar: sidebar 
keywords: storagegrid, node ip address, change node ip, change node ip address, changing node ip, changing node ip address 
summary: グリッド内のすべてのノードのグリッドネットワーク IP アドレスを変更する必要がある場合は、次の特別な手順 に従う必要があります。手順 を使用してグリッド全体のグリッドネットワーク IP を変更し、個々のノードを変更することはできません。 
---
= グリッド内のすべてのノードの IP アドレスを変更します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
グリッド内のすべてのノードのグリッドネットワーク IP アドレスを変更する必要がある場合は、次の特別な手順 に従う必要があります。手順 を使用してグリッドネットワークのIPをグリッド全体で変更し、個 々 のノードを変更することはできません。

.開始する前に
* あなたはファイルを持ってい `Passwords.txt`ます。


グリッドを正常に起動するには、すべての変更を同時に行う必要があります。


NOTE: この 手順 環境 はグリッドネットワークのみです。この手順 を使用して管理ネットワークまたはクライアントネットワークのIPアドレスを変更することはできません。

一方のサイトでのみノードのIPアドレスとMTUを変更する場合は、手順に従いますlink:changing-nodes-network-configuration.html["ノードのネットワーク設定の変更"]。

.手順
. DNS や NTP の変更、シングルサインオン（ SSO ）設定の変更（使用している場合）など、 IP 変更ツールを使用しない変更については、事前に計画を立てる必要があります。
+

NOTE: 既存手順 の NTP サーバが新しい IP アドレスでグリッドにアクセスできなくなる場合は、 IP の変更を行う前に新しい NTP サーバを追加します。

+

NOTE: 既存手順 の DNS サーバが新しい IP アドレスでグリッドにアクセスできなくなる場合は、 IP の変更を行う前に新しい DNS サーバを追加します。

+

NOTE: StorageGRID システムで SSO が有効になっており、証明書利用者信頼が（推奨される完全修飾ドメイン名ではなく）管理ノードの IP アドレスを使用して設定されている場合は、 Active Directory フェデレーションサービス（ AD FS ）でこれらの証明書利用者信頼を更新または再設定する準備をしておきます。 IP アドレスを変更した場合はすぐに反映されます。を参照して link:../admin/configuring-sso.html["シングルサインオンを設定します"]

+

NOTE: 必要に応じて、新しい IP アドレス用の新しいサブネットを追加します。

. プライマリ管理ノードにログインします。
+
.. 次のコマンドを入力します。 `ssh admin@_primary_Admin_Node_IP_`
.. ファイルに記載されているパスワードを入力し `Passwords.txt`ます。
.. 次のコマンドを入力してrootに切り替えます。 `su -`
.. ファイルに記載されているパスワードを入力し `Passwords.txt`ます。


+
rootとしてログインすると、プロンプトがからに `#`変わります `$`。

. 次のコマンドを入力して、IP変更ツールを起動します。 `change-ip`
. プロンプトでプロビジョニングパスフレーズを入力します。
+
メインメニューが表示されます。デフォルトでは、この `Selected nodes`フィールドはに設定されて `all`います。

+
image::../media/change_ip_tool_main_menu.png[IP 変更ツールの開始画面のスクリーンショット]

. メインメニューで「 * 2 * 」を選択して、すべてのノードの IP / サブネットマスク、ゲートウェイ、 MTU 情報を編集します。
+
.. 1 * を選択してグリッドネットワークを変更します。
+
選択が完了すると、ノード名、グリッドネットワーク名、データタイプ（ IP / マスク、ゲートウェイ、または MTU ）がプロンプトに表示されます。 および現在の値。

+
DHCP によって設定されたインターフェイスの IP アドレス、プレフィックス長、ゲートウェイ、または MTU を編集すると、インターフェイスが static に変更されます。DHCP によって設定された各インターフェイスの前に、警告が表示されます。

+
として設定されたインターフェイスは `fixed`編集できません。

.. 新しい値を設定するには、現在の値の形式で入力します。
.. 変更するすべてのノードを編集したら、「 * q * 」と入力してメインメニューに戻ります。
+
変更内容は、クリアまたは適用されるまで保持されます。



. 次のいずれかのオプションを選択して、変更内容を確認します。
+
** *5*: 変更された項目のみを表示するために分離された出力の編集を表示します。変更は、次の出力例に示すように、緑（追加）または赤（削除）で強調表示されます。
+
image::../media/change_ip_tool_edit_ip_mask_sample_output.png[説明が付随するスクリーンショット]

** *6*: 編集内容を出力に表示し、設定全体を表示します。変更は、緑（追加）または赤（削除）で強調表示されます。
+

NOTE: 一部のコマンドラインインターフェイスでは、追加と削除が取り消し線で示される場合があります。正しく表示されるためには、使用するターミナルクライアントが必要な VT100 エスケープシーケンスをサポートしている必要があります。



. オプション * 7 * を選択して、すべての変更を検証します。
+
この検証により、グリッドネットワークに関するルール（重複するサブネットの不使用など）に違反していないことが確認されます。

+
この例では、検証でエラーが返されています。

+
image::../media/change_ip_tool_validate_sample_error_messages.gif[説明が付随するスクリーンショット]

+
この例では、検証に合格しています。

+
image::../media/change_ip_tool_validate_sample_passed_messages.gif[説明が付随するスクリーンショット]

. 検証に合格したら、* 10 *を選択して新しいネットワーク構成を適用します。
. 次にノードを再起動したときに変更を適用するには、 * stage * を選択します。
+

NOTE: 「 * stage * 」を選択する必要があります。手動または* stage *ではなく* apply *を選択してローリングリスタートを実行しないでください。グリッドは正常に起動しません。

. 変更が完了したら、 *0* を選択して IP 変更ツールを終了します。
. すべてのノードを同時にシャットダウンします。
+

NOTE: すべてのノードが同時に停止するように、グリッド全体をシャットダウンする必要があります。

. ネットワークに対して必要な物理的または仮想的な変更を行います。
. すべてのグリッドノードが停止していることを確認します。
. すべてのノードの電源をオンにします。
. グリッドが正常に起動したら、次の操作を行います。
+
.. 新しいNTPサーバを追加した場合は、古いNTPサーバの値を削除します。
.. 新しいDNSサーバを追加した場合は、古いDNSサーバの値を削除します。


. Grid Manager から新しいリカバリパッケージをダウンロードします。
+
.. [* maintenance * （メンテナンス） ] > [* System * （システム * ） ] > [* Recovery packツケ （リカバリパッケージ * ）
.. プロビジョニングパスフレーズを入力します。




.関連情報
* link:adding-to-or-changing-subnet-lists-on-grid-network.html["グリッドネットワークのサブネットリストに対する追加または変更"]
* link:shutting-down-grid-node.html["グリッドノードをシャットダウンします"]

