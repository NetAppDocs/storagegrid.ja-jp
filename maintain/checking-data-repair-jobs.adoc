---
permalink: maintain/checking-data-repair-jobs.html 
sidebar: sidebar 
keywords: storagegrid, data repair 
summary: グリッドノードの運用を停止する前に、アクティブなデータ修復ジョブがないことを確認する必要があります。修復に失敗した場合は、手順 の運用を停止する前に、修復を再開し、完了させておく必要があります。 
---
= データ修復ジョブを確認します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
グリッド ノードを廃止または拡張する前に、アクティブなデータ修復ジョブがないことを確認する必要があります。修復に失敗した場合は、修復を再起動して完了させてから廃止手順を実行する必要があります。

参照link:../expand/index.html["カクチヨウタイフ"]グリッド ノードを展開する方法の詳細については、こちらをご覧ください。

.タスクの内容
切断されたストレージ ノードを廃止する必要がある場合は、廃止手順が完了した後にこれらの手順を実行して、データ修復ジョブが完了したことを確認します。削除されたノードにあった消去コード化されたフラグメントが復元されていることを確認する必要があります。

以下の手順は、イレイジャーコーディングオブジェクトがあるシステムにのみ適用されます。

.手順
. プライマリ管理ノードにログインします。
+
.. 次のコマンドを入力します。 `ssh admin@_grid_node_IP_`
.. ファイルに記載されているパスワードを入力し `Passwords.txt`ます。
.. 次のコマンドを入力してrootに切り替えます。 `su -`
.. ファイルに記載されているパスワードを入力し `Passwords.txt`ます。
+
rootとしてログインすると、プロンプトがからに `#`変わります `$`。



. 実行中の修復がないか確認します。 `repair-data show-ec-repair-status`
+
** データ修復ジョブを実行したことがない場合、出力はです `No job found`。修復ジョブを再開する必要はありません。
** データ修復ジョブを以前に実行したか、現在実行している場合は、出力には修復に関する情報が表示されます。各修復には、一意の修復 ID が割り当てられます。
+
image::../media/repair-data-status.png[修復データのステータス]



+

TIP: 必要に応じて、Grid Managerを使用して進行中のリストアプロセスを監視し、リストア履歴を表示できます。を参照して link:../maintain/restoring-volume.html["Grid Managerを使用してオブジェクトデータをリストアする"]

. すべての修理の状態がの場合は `Completed`、修復ジョブを再開する必要はありません。
. いずれかの修復の状態がの場合は `Stopped`、その修復を再開する必要があります。
+
.. 出力から、障害が発生した修復の修復 ID を取得します。
.. コマンドを実行します `repair-data start-ec-node-repair`。
+
オプションを使用して、 `--repair-id`修復IDを指定します。たとえば、修復IDが949292の修復を再試行する場合は、次のコマンドを実行します。 `repair-data start-ec-node-repair --repair-id 949292`

.. すべての修復のStateがになるまで、ECデータの修復のステータスを追跡し `Completed`ます。



