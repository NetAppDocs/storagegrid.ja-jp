---
permalink: monitor/email-alert-notifications.html 
sidebar: sidebar 
keywords: how to disable alert rules, how to remove a custom alert rule 
summary: アラート発生時に E メール通知が送信されるようにするには、 SMTP サーバに関する情報を指定する必要があります。また、アラート通知の受信者の E メールアドレスを入力する必要があります。 
---
= アラート用の E メール通知を設定します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
アラート発生時に E メール通知が送信されるようにするには、 SMTP サーバに関する情報を指定する必要があります。また、アラート通知の受信者の E メールアドレスを入力する必要があります。

.開始する前に
* Grid Managerにサインインしておきますlink:../admin/web-browser-requirements.html["サポートされている Web ブラウザ"]。
* あなたはを持っていますlink:../admin/admin-group-permissions.html["アラートまたはRoot Access権限を管理します。"]。


.タスクの内容
アラート通知に使用されるEメールセットアップは、AutoSupportパッケージには使用されません。ただし、すべての通知に同じ E メールサーバを使用できます。

StorageGRID環境に複数の管理ノードが含まれている場合は、プライマリ管理ノードがアラート通知、AutoSupportパッケージ、SNMPトラップおよびインフォームの優先送信者となります。プライマリ管理ノードが使用できなくなると、他の管理ノードから一時的に通知が送信されます。を参照して link:../primer/what-admin-node-is.html["管理ノードとは"]

.手順
. *アラート* > *電子メール設定*を選択します。
+
[ 電子メールの設定 ] ページが表示されます。

. [ Eメール通知を有効にする]*チェックボックスをオンにして、アラートが設定されたしきい値に達したときに通知Eメールが送信されるようにします。
+
電子メール（ SMTP ）サーバー、 Transport Layer Security （ TLS ）、電子メールアドレス、およびフィルタセクションが表示されます。

. 電子メール（ SMTP ）サーバーセクションで、 StorageGRID が SMTP サーバーにアクセスするために必要な情報を入力します。
+
SMTP サーバで認証が必要な場合は、ユーザ名とパスワードの両方を指定する必要があります。

+
[cols="1a,2a"]
|===
| フィールド | 入力 


 a| 
メールサーバ
 a| 
SMTPサーバの完全修飾ドメイン名（FQDN）またはIPアドレス。



 a| 
ポート
 a| 
SMTP サーバへのアクセスに使用するポート。1~65535 の範囲で指定する必要があります。



 a| 
ユーザ名（オプション）
 a| 
SMTP サーバで認証が必要な場合は、認証に使用するユーザ名を入力します。



 a| 
パスワード（オプション）
 a| 
SMTP サーバで認証が必要な場合は、で認証するためのパスワードを入力します。

|===
. [ 電子メールアドレス ] セクションで、送信者と各受信者の電子メールアドレスを入力します。
+
.. * 送信者電子メールアドレス * には、アラート通知の送信元アドレスとして使用する有効な電子メールアドレスを指定します。
+
例： `storagegrid-alerts@example.com`

.. [ 受信者 ] セクションで、電子メールリストごとに電子メールアドレスを入力するか、アラートが発生したときに電子メールを受信する必要があるユーザーを入力します。
+
受信者を追加するには、プラスアイコンを選択しimage:../media/icon_plus_sign_black_on_white.gif["プラスアイコン"]ます。



. SMTP サーバとの通信に Transport Layer Security （ TLS ）が必要な場合は、 Transport Layer Security （ TLS ）セクションで * Require TLS * を選択します。
+
.. [CA 証明書 *] フィールドに、 SMTP サーバの識別に使用する CA 証明書を入力します。
+
このフィールドに内容をコピーして貼り付けることも、「 * 参照」を選択してファイルを選択することもできます。

+
各中間発行認証局（ CA ）の証明書を含む単一のファイルを指定する必要があります。このファイルには、PEMでエンコードされた各CA証明書ファイルが、証明書チェーンの順序で連結されている必要があります。

.. SMTP EメールサーバでEメール送信者が認証用のクライアント証明書を提供する必要がある場合は、[クライアント証明書を送信]*チェックボックスをオンにします。
.. [ * クライアント証明書 * ] フィールドに、 SMTP サーバに送信する PEM でエンコードされたクライアント証明書を入力します。
+
このフィールドに内容をコピーして貼り付けることも、「 * 参照」を選択してファイルを選択することもできます。

.. [*Private Key*] フィールドに、クライアント証明書の秘密鍵を暗号化されていない PEM エンコードで入力します。
+
このフィールドに内容をコピーして貼り付けることも、「 * 参照」を選択してファイルを選択することもできます。

+

NOTE: Eメール設定を編集する必要がある場合は、鉛筆アイコンを選択しimage:../media/icon_edit_tm.png["編集アイコン"]てこのフィールドを更新します。



. [ フィルタ ] セクションで、特定のアラートのルールがサイレント化されていない限り、電子メール通知を行うアラート重大度レベルを選択します。
+
[cols="1a,2a"]
|===
| 重大度 | 製品説明 


 a| 
マイナー、メジャー、クリティカルです
 a| 
アラートルールの Minor 、 Major 、 Critical のいずれかの条件が満たされたときに、 E メール通知が送信されます。



 a| 
メジャー、クリティカルです
 a| 
アラートルールの Major または Critical の条件が満たされたときに、 E メール通知が送信されます。マイナーアラートの通知は送信されません。



 a| 
重大な問題のみ
 a| 
アラートルールの Critical 条件が満たされたときにのみ、 E メール通知が送信されます。MinorアラートやMajorアラートの通知は送信されません。

|===
. E メールの設定をテストする準備ができたら、次の手順を実行します。
+
.. [ テストメールの送信 ] を選択します。
+
テスト用 E メールが送信されたことを示す確認メッセージが表示されます。

.. すべての E メール受信者の受信ボックスを調べて、テスト用 E メールが受信されたことを確認します。
+

NOTE: 数分以内に電子メールが受信されない場合、または * 電子メール通知エラー * アラートがトリガーされた場合は、設定を確認してから再試行してください。

.. 他の管理ノードにサインインし、テスト用 E メールを送信してすべてのサイトからの接続を確認します。
+

NOTE: アラート通知をテストするときは、すべての管理ノードにサインインして接続を確認する必要があります。これは、すべての管理ノードがテストEメールを送信するAutoSupportパッケージのテストとは対照的です。



. [ 保存（ Save ） ] を選択します。
+
テスト用 E メールを送信しても設定は保存されません。[ 保存（ Save ） ] を選択する必要があります。

+
E メール設定が保存されます。





== アラート E メール通知に記載される情報

SMTP E メールサーバを設定すると、アラートルールがサイレンスによって停止されていないかぎり、アラートがトリガーされたときに E メール通知が指定の受信者に送信されます。を参照して link:silencing-alert-notifications.html["アラート通知をサイレント化する"]

E メール通知には次の情報が含まれます。

image::../media/alerts_email_notification.png[アラートの E メール通知]

[cols="1a,6a"]
|===
| コールアウト | 製品説明 


 a| 
1
 a| 
アラートの名前と、そのアラートのアクティブなインスタンスの数。



 a| 
2
 a| 
アラートの概要 。



 a| 
3
 a| 
アラートの推奨される対処方法。



 a| 
4
 a| 
アラートのアクティブな各インスタンスに関する詳細情報。対象となるノードとサイト、アラートの重大度、アラートルールがトリガーされた UTC 時間、影響を受けるジョブとサービスの名前などが含まれます。



 a| 
5
 a| 
通知を送信した管理ノードのホスト名。

|===


== アラートのグループ化方法

StorageGRID は、アラートがトリガーされたときに大量の E メール通知が送信されないように、複数のアラートを同じ通知にまとめます。

StorageGRID で複数のアラートを E メール通知でグループ化する例については、次の表を参照してください。

[cols="1a,1a"]
|===
| 動作 | 例 


 a| 
各アラート通知は、同じ名前のアラートにのみ適用されます。名前が異なる 2 つのアラートが同時にトリガーされると、 2 つの E メール通知が送信されます。
 a| 
* アラート A は 2 つのノードで同時にトリガーされます。1 つの通知のみが送信されます。
* アラート A はノード 1 でトリガーされ、アラート B はノード 2 で同時にトリガーされます。2 つの通知が送信されます各アラートに 1 つずつ送信されます




 a| 
特定のノードの特定のアラートが複数の重大度のしきい値に達した場合は、最も重大度の高いアラートに関してのみ通知が送信されます。
 a| 
* アラート A がトリガーされ、 Minor 、 Major 、 Critical の各アラートしきい値に達した場合重大アラートに対して 1 つの通知が送信されます。




 a| 
あるアラートが初めてトリガーされた場合、 StorageGRID は 2 分待ってから通知を送信します。この時間内に同じ名前のアラートがほかにもトリガーされた場合、 StorageGRID はすべてのアラートを最初の通知の最初のグループにまとめます
 a| 
. アラートAがノード1で8：00にトリガーされ、通知は送信されません。
. アラートAがノード2で08：01にトリガーされ、通知は送信されません。
. 08:02 で、アラートの両方のインスタンスを報告する通知が送信されます。




 a| 
同じ名前の別のアラートがトリガーされた場合、 StorageGRID は 10 分待ってから新しい通知を送信します。新しい通知では、以前に報告されたものも含めて、アクティブなアラート（サイレント化されていない現在のアラート）がすべて報告されます。
 a| 
. アラートAがノード1で8：00にトリガーされ、通知が 08:02 に送信されます。
. アラートAがノード2で08：05にトリガーされます。2回目の通知は8：15（10分後）に送信されます。両方のノードが報告されます。




 a| 
同じ名前の現在のアラートが複数あり、そのうちの 1 つのアラートが解決された場合、そのアラートが解決されたノードでアラートが再度発生しても新しい通知は送信されません。
 a| 
. アラート A がノード 1 に対してトリガーされます。通知が送信されます。
. アラート A がノード 2 に対してトリガーされます。2 回目の通知が送信されます。
. アラート A はノード 2 について解決されましたが、ノード 1 に対してはアクティブなままです。
. アラート A がノード 2 に対して再度トリガーされます。ノード 1 のアラートがまだアクティブなため、新しい通知は送信されません。




 a| 
StorageGRID は、アラートのすべてのインスタンスが解決されるか、アラートルールがサイレント化されるまで、 7 日ごとに E メール通知を送信します。
 a| 
. 3 月 8 日にノード 1 のアラート A がトリガーされます。通知が送信されます。
. アラート A が解決されていないか、サイレント化されていその他の通知は 3 月 15 日、 3 月 22 日、 3 月 29 日などに送信されます。


|===


== アラート E メール通知のトラブルシューティング

* Email notification failure * アラートがトリガーされた場合、またはテストアラート E メール通知を受信できない場合は、次の手順に従って問題 を解決します。

.開始する前に
* Grid Managerにサインインしておきますlink:../admin/web-browser-requirements.html["サポートされている Web ブラウザ"]。
* あなたはを持っていますlink:../admin/admin-group-permissions.html["アラートまたはRoot Access権限を管理します。"]。


.手順
. 設定を確認します。
+
.. *アラート* > *電子メール設定*を選択します。
.. E メール（ SMTP ）サーバの設定が正しいことを確認します。
.. 受信者の有効な E メールアドレスが指定されていることを確認します。


. スパムフィルタを確認し、 E メールが迷惑メールフォルダに送信されていないことを確認します。
. メール管理者に問い合わせて、送信者アドレスからのメールがブロックされていないことを確認してください。
. 管理ノードのログファイルを収集し、テクニカルサポートに連絡します。
+
テクニカルサポートは、ログの情報を参考に問題の原因を特定します。たとえば、指定したサーバに接続するときに、 prometheus.log ファイルにエラーが表示されることがあります。

+
を参照して link:collecting-log-files-and-system-data.html["ログファイルとシステムデータを収集"]


