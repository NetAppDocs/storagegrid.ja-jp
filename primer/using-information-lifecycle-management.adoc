---
permalink: primer/using-information-lifecycle-management.html 
sidebar: sidebar 
keywords: what is information lifecycle management, how to use ilm 
summary: StorageGRID システム内のすべてのオブジェクトの配置、期間、および取り込み動作を制御するには、情報ライフサイクル管理\（ILM\）を使用します。ILM ルールは、 StorageGRID が時間の経過に伴ってオブジェクトを格納する方法を決定します1 つ以上の ILM ルールを設定して ILM ポリシーに追加します。 
---
= 情報ライフサイクル管理
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
情報ライフサイクル管理 (ILM) を使用して、 StorageGRIDシステム内のすべてのオブジェクトの配置、期間、および取り込み動作を制御します。  ILM ルールは、 StorageGRID が時間の経過とともにオブジェクトを保存する方法を決定します。 1 つ以上の ILM ルールを設定し、それらを ILM ポリシーに追加します。グリッドには、一度に複数のアクティブなポリシーを設定できます。

ILM ルールでは次の項目を定義

* どのオブジェクトを保存するか。ルールはすべてのオブジェクトに適用できます。また、フィルターを指定して、ルールが適用されるオブジェクトを識別することもできます。たとえば、ルールは、特定のテナント アカウント、特定の S3 バケット、または特定のメタデータ値に関連付けられたオブジェクトにのみ適用できます。
* ストレージのタイプと場所。オブジェクトはストレージノードまたはクラウドストレージプールに格納できます。
* 作成するオブジェクトコピーのタイプ。レプリケートコピーとイレイジャーコーディングコピーが可能
* レプリケートコピーの場合は、作成されるコピーの数。
* （イレイジャーコーディングコピーの場合）使用されるイレイジャーコーディングスキーム。
* オブジェクトのストレージの場所とコピーのタイプの経時的変化。
* オブジェクトがグリッドに取り込まれるときにオブジェクトデータを保護する方法（同期配置またはデュアルコミット）。


オブジェクトメタデータは ILM ルールによって管理されません。代わりに、オブジェクトメタデータはメタデータストア内の Cassandra データベースに格納されます。データを損失から保護するために、オブジェクトメタデータの 3 つのコピーが各サイトで自動的に維持されます。



== ILM ルールの例

たとえば、ILMルールでは次のように指定できます。

* テナントAに属するオブジェクトにのみ適用されます
* それらのオブジェクトのレプリケートコピーを2つ作成し、各コピーを別 々 のサイトに格納します。
* 2つのコピーは「無期限」で保持されます。つまり、StorageGRIDでは自動的に削除されません。これらのオブジェクトは、クライアントの削除要求によって削除されるか、バケットライフサイクルが終了するまで、 StorageGRID によって保持されます。
* 取り込み動作には[Balanced]オプションを使用します。テナントAがオブジェクトをStorageGRID に保存するとすぐに2サイトの配置手順が適用されます。ただし、必要な両方のコピーをすぐに作成できない場合は除きます。
+
たとえば、テナント A がオブジェクトを保存したときにサイト 2 に到達できない場合、 StorageGRID はサイト 1 のストレージノードに 2 つの中間コピーを作成します。サイト 2 が使用可能になると、 StorageGRID はそのサイトで必要なコピーを作成します。





== ILM ポリシーによるオブジェクトの評価方法

StorageGRIDシステムのアクティブなILMポリシーによって、すべてのオブジェクトの配置、期間、および取り込み動作が制御されます。

クライアントがオブジェクトを StorageGRID に保存すると、オブジェクトはアクティブポリシー内の順序付けられた ILM ルールに照らして次のように評価されます。

. ポリシー内の最初のルールのフィルタがオブジェクトに一致すると、オブジェクトはそのルールの取り込み動作に従って取り込まれ、そのルールの配置手順に従って格納されます。
. 最初のルールのフィルタがオブジェクトに一致しない場合、オブジェクトはポリシー内の後続の各ルールに照らして（一致するまで）評価されます。
. どのルールもオブジェクトに一致しない場合は、ポリシー内のデフォルトルールの取り込み動作と配置手順が適用されます。デフォルトルールはポリシーの最後のルールであり、フィルタは使用できません。すべてのテナント、すべてのバケット、およびすべてのオブジェクトバージョンに適用する必要があります。




== ILM ポリシーの例

たとえば、ILMポリシーに次の情報を指定する3つのILMルールを含めることができます。

* *ルール1：テナントAのレプリケートコピー*
+
** テナントAに属するすべてのオブジェクトを一致します
** これらのオブジェクトを3つのサイトに3つのレプリケートコピーとして格納します。
** 他のテナントに属するオブジェクトはルール1に一致しないため、ルール2に照らして評価されます。


* *ルール2：1MBを超えるオブジェクトのイレイジャーコーディング*
+
** 他のテナントのすべてのオブジェクトが一致します（1MBを超える場合にのみ一致します）。これらのオブジェクトは、 3 つのサイトで 6+3 のイレイジャーコーディングを使用して格納されます。
** は1MB以下のオブジェクトに一致しないため、これらのオブジェクトはルール3に照らして評価されます。


* *ルール3：2つのデータセンターに2つのコピーを作成*（デフォルト）
+
** は、ポリシー内の最後のデフォルトルールです。フィルタを使用しません。
** ルール1またはルール2に一致しないすべてのオブジェクト（テナントAに属していない1MB以下のオブジェクト）のレプリケートコピーを2つ作成します。




image::../media/ilm_policy_and_rules.png[ILM のポリシーとルール]

.関連情報
* link:../ilm/index.html["ILM を使用してオブジェクトを管理する"]

