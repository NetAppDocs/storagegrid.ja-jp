---
permalink: rhel/storage-and-performance-requirements.html 
sidebar: sidebar 
keywords: red hat linux storage requirements, performance requirements host storage, host volumes, netapp ontap, fabricpool 
summary: 初期設定と将来のストレージ拡張に対応できる十分なスペースを確保できるよう、 StorageGRID ノードのストレージ要件を把握しておく必要があります。 
---
= ストレージとパフォーマンスの要件
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
初期設定と将来のストレージ拡張に対応できる十分なスペースを確保できるよう、 StorageGRID ノードのストレージ要件を把握しておく必要があります。

StorageGRID ノードに必要なストレージは、 3 つの論理カテゴリに分類されます。

* * コンテナプール * -- ノードコンテナ用のパフォーマンス階層（ 10K SAS または SSD ）ストレージ。 StorageGRID ノードをサポートするホストにコンテナエンジンをインストールして設定するときに、コンテナエンジンストレージドライバに割り当てられます。
* * システムデータ * -- システムデータとトランザクションログのノード単位の永続的ストレージ用のパフォーマンス階層（ 10K SAS または SSD ）ストレージ。 StorageGRID ホストサービスで個々のノードにマッピングされて使用されます。
* * オブジェクトデータ * -- オブジェクトデータとオブジェクトメタデータの永続的なストレージを実現するパフォーマンス階層（ 10K SAS または SSD ）のストレージと大容量階層（ NL-SAS / SATA ）のストレージ。


カテゴリに関係なく、いずれのストレージにも RAID ベースのブロックデバイスを使用する必要があります。非冗長ディスク、SSD、JBODはサポートされていません。いずれのカテゴリのストレージにも、共有またはローカルのRAIDストレージを使用できます。ただし、StorageGRID のノード移行機能を使用する場合は、システムデータとオブジェクトデータの両方を共有ストレージに格納する必要があります。詳細については、を参照してください link:node-container-migration-requirements.html["ノードコンテナの移行要件"]。



== パフォーマンス要件

コンテナプールのボリューム、システムデータのボリューム、およびオブジェクトメタデータのボリュームのパフォーマンスは、システム全体のパフォーマンスに大きく影響します。ボリュームのディスクパフォーマンスが、レイテンシ、 1 秒あたりの入出力操作（ IOPS ）、スループットの点で適切になるように、それらのボリュームにはパフォーマンス階層（ 10K SAS または SSD ）のストレージを使用します。オブジェクトデータの永続的なストレージには、大容量階層（ NL-SAS / SATA ）のストレージを使用できます。

コンテナプール、システムデータ、およびオブジェクトデータ用のボリュームでは、ライトバックキャッシュを有効にする必要があります。キャッシュは、保護されたメディアまたは永続的なメディアに配置する必要があります。



== NetApp ONTAPストレージを使用するホストの要件

StorageGRID ノードがNetApp ONTAP システムから割り当てられたストレージを使用している場合は、ボリュームでFabricPool 階層化ポリシーが有効になっていないことを確認してください。StorageGRIDノードで使用するボリュームでFabricPool階層化を無効にすると、トラブルシューティングとストレージの処理が簡単になります。


NOTE: FabricPoolを使用して、StorageGRIDに関連するデータをStorageGRID自体に階層化しないでください。StorageGRIDデータをStorageGRIDに階層化すると、トラブルシューティングや運用が複雑になります。



== 必要なホストの数

各 StorageGRID サイトに、少なくとも 3 つのストレージノードが必要です。


NOTE: 本番環境では、1つの物理ホストまたは仮想ホストで複数のストレージノードを実行しないでください。各ストレージノードに専用のホストを使用すると、分離された障害ドメインが提供されます。

管理ノードやゲートウェイノードなど、他のタイプのノードは、同じホストに導入するか、必要に応じて独自の専用ホストに導入することができます。



== 各ホストのストレージボリュームの数

次の表に、ホストに導入するノードの種類別に、各ホストに必要なストレージボリューム（ LUN ）の数と各 LUN に必要な最小サイズを示します。

テストで使用できる LUN の最大サイズは 39TB です。


NOTE: これらはホストごとの数値を示したものであり、グリッド全体の数値ではありません。

|===
| LUNの用途 | ストレージのカテゴリ | LUN数 | LUN あたりの最小サイズ 


 a| 
コンテナエンジンのストレージプール
 a| 
コンテナプール
 a| 
1
 a| 
ノードの総数 × 100GB



 a| 
`/var/local`ボリューム
 a| 
システムデータ
 a| 
このホストのノードごとに 1 個
 a| 
90GB



 a| 
ストレージノード
 a| 
オブジェクトデータ
 a| 
このホストのストレージノードごとに 3 個

* 注：ソフトウェアベースのストレージノードには 1~16 個のストレージボリュームを設定できます。 3 個以上のストレージボリュームを推奨します。
 a| 
12TB（4TB / LUN）詳細については、を参照してください<<storage_req_SN,ストレージノードのストレージ要件>>。



 a| 
ストレージノード（メタデータのみ）
 a| 
オブジェクトメタデータ
 a| 
1
 a| 
4TB詳細については、を参照してください<<storage_req_SN,ストレージノードのストレージ要件>>。

*注*：メタデータのみのストレージノードに必要なrangedbは1つだけです。



 a| 
管理ノードの監査ログ
 a| 
システムデータ
 a| 
このホストの管理ノードごとに 1 個
 a| 
200GB



 a| 
管理ノードのテーブル
 a| 
システムデータ
 a| 
このホストの管理ノードごとに 1 個
 a| 
200GB

|===

NOTE: 設定されている監査レベルに応じて、S3オブジェクトキー名、 また、保持する必要がある監査ログデータの量については、各管理ノードで監査ログLUNのサイズを拡張する必要があります。一般に、グリッドではS3処理ごとに約1KBの監査データが生成され、 つまり、200 GBのLUNでは、1日あたり7、000万件の処理、または2～3日間は1秒あたり800件の処理がサポートされます。



== ホストの最小ストレージスペース

次の表に、各タイプのノードに必要な最小ストレージスペースを示します。この表を参照して、ホストに導入するノードの種類に応じて、ストレージカテゴリごとにホストで確保しなければならない最小ストレージ容量を決定できます。


NOTE: ディスクSnapshotを使用してグリッドノードをリストアすることはできません。代わりに、各タイプのノードの手順を参照してlink:../maintain/warnings-and-considerations-for-grid-node-recovery.html["グリッドノードのリカバリ"]ください。

|===
| ノードのタイプ | コンテナプール | システムデータ | オブジェクトデータ 


| ストレージノード  a| 
100GB
 a| 
90GB
 a| 
4,000GB



 a| 
管理ノード
 a| 
100GB
 a| 
490GB （ 3 個の LUN ）
 a| 
_ 該当なし _



 a| 
ゲートウェイノード
 a| 
100GB
 a| 
90GB
 a| 
_ 該当なし _

|===


== 例：ホストのストレージ要件の計算

同じホストに 3 つのノードを導入することを計画しているとします。ストレージノードが 1 つ、管理ノードが 1 つ、ゲートウェイノードが 1 つです。ホストには少なくとも 9 個のストレージボリュームを用意する必要があります。ノードコンテナ用にパフォーマンス階層のストレージが 300GB 以上、システムデータとトランザクションログ用にパフォーマンス階層のストレージが 670GB 以上、オブジェクトデータ用に容量階層のストレージが 12TB 以上、それぞれ必要になります。

|===
| ノードのタイプ | LUNの用途 | LUN数 | LUNサイズ 


| ストレージノード  a| 
コンテナエンジンのストレージプール
 a| 
1
 a| 
300GB （ 100GB/ ノード）



 a| 
ストレージノード
 a| 
`/var/local`ボリューム
 a| 
1
 a| 
90GB



| ストレージノード  a| 
オブジェクトデータ
 a| 
3
 a| 
12TB （ 4TB / LUN ）



 a| 
管理ノード
 a| 
`/var/local`ボリューム
 a| 
1
 a| 
90GB



| 管理ノード  a| 
管理ノードの監査ログ
 a| 
1
 a| 
200GB



| 管理ノード  a| 
管理ノードのテーブル
 a| 
1
 a| 
200GB



 a| 
ゲートウェイノード
 a| 
`/var/local`ボリューム
 a| 
1
 a| 
90GB



 a| 
* 合計 *
 a| 
 a| 
*9*
 a| 
* コンテナプール： * 300GB

* システムデータ： *670GB

* オブジェクトデータ： 12 、 000GB

|===


== ストレージノードのストレージ要件

ソフトウェアベースのストレージノードのストレージボリューム数は 1~16 個までにすることを推奨します。 -3 個以上のストレージボリュームを使用することを推奨します。各ストレージボリュームのサイズは 4TB 以上にします。


NOTE: アプライアンスストレージノードには、最大 48 個のストレージボリュームを設定できます。

図に示すように、 StorageGRID は各ストレージノードのストレージボリューム 0 にオブジェクトメタデータ用のスペースをリザーブします。ストレージボリューム 0 の残りのスペースとストレージノード内のその他のストレージボリュームは、オブジェクトデータ専用に使用されます。

image::../media/metadata_space_storage_node.png[Metadata Space ストレージノード]

冗長性を確保し、オブジェクトメタデータを損失から保護するために、 StorageGRID は各サイトのシステム内のすべてのオブジェクトにメタデータのコピーを 3 つずつ格納します。オブジェクトメタデータの 3 つのコピーが各サイトのすべてのストレージノードに均等に分散されます。

メタデータのみのストレージノードを含むグリッドをインストールする場合は、グリッドにオブジェクトストレージ用のノードの最小数も含まれている必要があります。メタデータ専用ストレージノードの詳細については、を参照してくださいlink:../primer/what-storage-node-is.html#types-of-storage-nodes["ストレージノードのタイプ"]。

* 単一サイトのグリッドの場合は、オブジェクトとメタデータ用に少なくとも2つのストレージノードが設定されます。
* マルチサイトグリッドの場合は、サイトごとに少なくとも1つのストレージノードがオブジェクトとメタデータ用に設定されます。


新しいストレージノードのボリューム 0 にスペースを割り当てる場合は、そのノードのすべてのオブジェクトメタデータの一部に対して十分なスペースを確保する必要があります。

* 少なくとも 4TB をボリューム 0 に割り当てる必要があります。
+

NOTE: ストレージノードでストレージボリュームを1つだけ使用していて、そのボリュームに4TB以下を割り当てると、ストレージノードが起動時にストレージ読み取り専用状態になり、オブジェクトメタデータのみが格納される可能性があります。

+

NOTE: ボリューム0への割り当てが500GB未満の場合（非本番環境での使用のみ）は、ストレージボリュームの容量の10%がメタデータ用にリザーブされます。

* ソフトウェアベースのメタデータのみのノードリソースは、既存のストレージノードリソースと一致している必要があります。例：
+
** 既存のStorageGRIDサイトでSG6000またはSG6100アプライアンスを使用している場合は、ソフトウェアベースのメタデータのみのノードが次の最小要件を満たしている必要があります。
+
*** 128GBのRAM
*** 8コアCPU
*** 8TB SSDまたはCassandraデータベース用同等のストレージ（rangedb/0）


** 既存のStorageGRIDサイトで、24GBのRAM、8コアCPU、3TBまたは4TBのメタデータストレージを搭載した仮想ストレージノードを使用している場合は、ソフトウェアベースのメタデータ専用ノードで同様のリソース（24GBのRAM、8コアCPU、4TBのメタデータストレージ（rangedb/0）を使用する必要があります。
+
新しいStorageGRIDサイトを追加するときは、新しいサイトの総メタデータ容量が少なくとも既存のStorageGRIDサイトと一致し、新しいサイトのリソースが既存のStorageGRIDサイトのストレージノードと一致している必要があります。



* 新しいシステム（StorageGRID 11.6以降）をインストールし、各ストレージノードに128GB以上のRAMがある場合は、8TB以上をボリューム0に割り当てます。ボリューム 0 に大きな値を設定すると、各ストレージノードでメタデータに使用できるスペースが増加する可能性があります。
* サイトに複数のストレージノードを設定する場合は、可能であればボリューム 0 にも同じ設定を使用します。サイトにサイズが異なるストレージノードがある場合、ボリューム 0 が最も小さいストレージノードがそのサイトのメタデータ容量を決定します。


詳細については、を参照してくださいlink:../admin/managing-object-metadata-storage.html["オブジェクトメタデータストレージを管理する"]。
